<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="custom-style.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
	<div style="overflow: hidden;">
		<div style="height: 57px;min-width: 1039px;background-size: auto 100%;background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABwgAAAABCAYAAADKO/rAAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAABRSURBVFhH7dUxCoBADEXB5LK5/w1iIaLIrsgWNs50Sf/4WVUd8HOZGd1nCqMbGNMPrNMPrJv1cvz0A3OjfuwPvDPrxf7A7t7IlX7gmX74VsQGguw4S6+UnSYAAAAASUVORK5CYII=');">
			<img src="titleleft.png" style="float: left;"/>
			<img src="titleright.png" alt="" style="float: right;" />
		</div>
	</div>
<!-- Generated by Doxygen 1.8.15 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home&#160;Page</span></a></li>
      <li><a href="_xE5_x8F_x91_xE7_x89_x88_xE8_xAF_xB4_xE6_x98_x8E.html"><span>Release&#160;Notes</span></a></li>
      <li><a href="_xE7_xBC_x96_xE7_xA8_x8B_xE5_xBC_x95_xE5_xAF_xBC.html"><span>Programming&#160;Guide</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li><a href="_xE7_xA4_xBA_xE4_xBE_x8B_xE7_xA8_x8B_xE5_xBA_x8F_xE6_xA6_x82_xE8_xA7_x88.html"><span>Samples</span></a></li>
      <li><a href="_xE5_xB8_xB8_xE8_xA7_x81_xE9_x97_xAE_xE9_xA2_x98.html"><span>FAQs</span></a></li>
      <li><a href="_xE6_xB3_x95_xE5_xBE_x8B_xE5_xA3_xB0_xE6_x98_x8E.html"><span>Disclaimer</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="PageDoc"><div class="contents">
<div class="textblock"><div class="header" style="margin-left:-12px;margin-top:-10px;margin-right:-8px;"> <div class="headertitle"> <div class="title">Event and Exception</div> </div> </div> <p>There are 2 types of SDK events: normal notification events and exception alarm events.</p>
<ul>
<li>
<p class="startli"></p>
<p class="interli">The normal notification events are sent when frame grabbers or cameras are in normal condition. Based on event generation conditions, operations to report events vary.</p>
<ul>
<li>
<p class="startli"></p>
<p class="interli">Some events are only triggered when cameras or cameras connected to frame grabbers start grabbing images. To report these events to the program, you should first subscribe to and enable the specified events, and call <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE9_x87_x87_xE9_x9B_x86_xE4_xB8_x8E_xE6_xB8_xB2_xE6_x9F_x93.html#ga379f992aec0ddd3170b0ef0f5f2306d7" title="Starts grabbing images.">MV_CC_StartGrabbing()</a> to start grabbing images.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"></p>
<p class="interli">Other events can be reported to the program without grabbing images. To report these events to the program, you should subscribe to and enable the specified events.</p>
<p class="endli"></p>
</li>
</ul>
</li>
<li>
<p class="startli"></p>
<p class="interli">The exception alarm events are sent when errors occur in the SDK and can be acquired directly from the SDK. These events are to notify users of exceptions during frame grabber or camera running (e.g., camera offline) so that users can perform troubleshooting in time. </p>
<p class="interli"></p>
<p class="interli">When cameras or frame grabbers are turned on, custom exception alarm event processing function can be registered. After registration, when exception alarm is generated, the device will automatically execute custom exception alarm processing function.</p>
<p class="endli"></p>
</li>
</ul>
<div> <div id="eventGrab"> <div class="mainparams"> <div class="title">Event Acquisition</div> </div> <div class="subparamswhite"> </div></div></div><div><div id="eventGrab"><div class="subparamswhite">The normal notification event handling process: subscribe to event, enable event, get event, disable event, and unsubscribe from event.</div></div></div><div><div id="eventGrab"><div class="subparamswhite"> <dl class="section note"><dt>Note</dt><dd>To get the normal notification events, configure the EventControl feature of the frame grabber / camera via the client. <ul>
<li>
For more details of camera configuration, refer to the client user manual. </li>
<li>
Frame grabber events can be configured via the frame grabber event configuration tool. </li>
</ul>
</dd></dl>
<ol>
<li>
<p class="startli"></p>
<p class="interli"><b>Subscribe to Event</b>: Call <a class="el" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE5_x8F_x8A_xE5_xBC_x82_xE5_xB8_xB8.html#gacc4517be2f2fe63573f5e2e1169c94aa" title="Registers a callback for single event.">MV_CC_RegisterEventCallBackEx()</a> to subscribe to a specified event. Pass the event name strEventName when calling this API.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"></p>
<p class="interli"><b>Enable Event</b>: Call <a class="el" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE5_x8F_x8A_xE5_xBC_x82_xE5_xB8_xB8.html#gaabaa8187cee0a8e5bb2e78f129f4bf0a" title="Enables specified event of device.">MV_CC_EventNotificationOn()</a> to enable the specified event.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"></p>
<p class="interli"><b>Get Event</b>: When the frame grabber or camera generates an event, the SDK will trigger the corresponding event callback function and push the event information to users. The pushed event information usually contains key information such as the event name, event ID, and timestamp, but not necessarily others such as frame No. and event data. Information contained in different events might vary, and the actual condition shall prevail.</p>
<dl class="section attention"><dt>Attention</dt><dd>Avoid calling the event callback function for operations that require more time, otherwise the subsequent event information push will be blocked. <br />
 </dd></dl>
</li>
<li>
<p class="startli"></p>
<p class="interli"><b>Close Event</b>: Call <a class="el" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE5_x8F_x8A_xE5_xBC_x82_xE5_xB8_xB8.html#ga9e144b38edcfa73b633177c8a18c7a42" title="Disables specified event of device.">MV_CC_EventNotificationOff()</a> to close the specified event.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"></p>
<p class="interli"><b>Unsubscribe from Event</b>: Call <a class="el" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE5_x8F_x8A_xE5_xBC_x82_xE5_xB8_xB8.html#gacc4517be2f2fe63573f5e2e1169c94aa" title="Registers a callback for single event.">MV_CC_RegisterEventCallBackEx()</a> to unsubscribe from the event. Pass the event name strEventName when calling this API, and set the event callback pointer cbEvent to NULL. After a successful calling, you can unsubscribe from the specified event.</p>
<p class="endli"></p>
</li>
</ol>
</div></div></div><div><div id="eventGrab"><div class="subparamswhite">The following sample codes show the process of camera exposure end event.</div></div></div><div><div id="eventGrab"><div class="subparamswhite"> <div class="fragment"><div class="line">stEventInfo = POINTER(MV_EVENT_OUT_INFO)</div><div class="line">EventInfoCallBack = <a class="code" href="namespace_parametrize_camera___area_scan_i_o_settings.html#a3bae6d695a340d90cc6e249839d03825">winfun_ctype</a>(<span class="keywordtype">None</span>, stEventInfo, c_void_p)</div><div class="line"></div><div class="line"><span class="keyword">def </span><a class="code" href="namespace_events___interface.html#ab59b303fa8bf249d7233b2879322c040">event_callback</a>(pEventInfo, pUser):</div><div class="line">    stPEventInfo = cast(pEventInfo, POINTER(MV_EVENT_OUT_INFO)).contents</div><div class="line">    nBlockId = stPEventInfo.nBlockIdHigh</div><div class="line">    nBlockId = (nBlockId &lt;&lt; 32) + stPEventInfo.nBlockIdLow</div><div class="line">    nTimestamp = stPEventInfo.nTimestampHigh</div><div class="line">    nTimestamp = (nTimestamp &lt;&lt; 32) + stPEventInfo.nTimestampLow</div><div class="line">    <span class="keywordflow">if</span> stPEventInfo:</div><div class="line">        <span class="keywordflow">print</span> (<span class="stringliteral">&quot;EventName[%s], EventId[%u], BlockId[%d], Timestamp[%d]&quot;</span> % (stPEventInfo.EventName.decode(<span class="stringliteral">&#39;UTF-8&#39;</span>),</div><div class="line">                                                                           stPEventInfo.nEventID, nBlockId, nTimestamp))</div><div class="line"></div><div class="line">CALL_BACK_FUN = <a class="code" href="namespace_events___interface.html#aab25803c5c5aa89135648c3caf6b95b6">EventInfoCallBack</a>(event_callback)</div><div class="line"><span class="keywordflow">if</span> __name__ == <span class="stringliteral">&quot;__main__&quot;</span>:</div><div class="line"></div><div class="line">    <span class="comment"># Initialize SDK resources</span></div><div class="line">    MvCamera.MV_CC_Initialize()</div><div class="line"></div><div class="line">    <span class="comment"># Enumerate devices and create camera instance</span></div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment"># Turn on the device</span></div><div class="line">    ret = cam.MV_CC_OpenDevice(MV_ACCESS_Exclusive, 0)</div><div class="line">    <span class="keywordflow">if</span> ret != 0:</div><div class="line">        <span class="keywordflow">print</span> (<span class="stringliteral">&quot;open device fail! ret[0x%x]&quot;</span> % ret)</div><div class="line">        sys.exit()</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment"># Enable Event by setting event selector as ExposureEnd</span></div><div class="line">    ret = cam.MV_CC_EventNotificationOn(<span class="stringliteral">&quot;ExposureEnd&quot;</span>)</div><div class="line">    <span class="keywordflow">if</span> ret != 0:</div><div class="line">        <span class="keywordflow">print</span> (<span class="stringliteral">&quot;Set Event Notification On fail! ret[0x%x]&quot;</span> % ret)</div><div class="line">        sys.exit()</div><div class="line"></div><div class="line">    <span class="comment"># Register an event callback</span></div><div class="line">    ret = cam.MV_CC_RegisterEventCallBackEx(<span class="stringliteral">&quot;ExposureEnd&quot;</span>, CALL_BACK_FUN,<span class="keywordtype">None</span>)</div><div class="line">    <span class="keywordflow">if</span> ret != 0:</div><div class="line">        <span class="keywordflow">print</span> (<span class="stringliteral">&quot;register event callback fail! ret [0x%x]&quot;</span> % ret)</div><div class="line">        sys.exit()</div><div class="line"></div><div class="line">    <span class="comment"># Start grabbing images</span></div><div class="line">    cam.MV_CC_StartGrabbing()</div><div class="line">    <span class="keywordflow">if</span> ret != 0:</div><div class="line">        <span class="keywordflow">print</span> (<span class="stringliteral">&quot;start grabbing fail! ret[0x%x]&quot;</span> % ret)</div><div class="line">        sys.exit()</div><div class="line"></div><div class="line">    <span class="keywordflow">print</span> (<span class="stringliteral">&quot;press a key to stop grabbing.&quot;</span>)</div><div class="line">    <a class="code" href="namespace_parametrize_camera___area_scan_i_o_settings.html#ada091daac0b443feeefd371689422720">press_any_key_exit</a>()</div><div class="line"></div><div class="line">    <span class="comment"># Stop grabbing images</span></div><div class="line">    ret = cam.MV_CC_StopGrabbing()</div><div class="line">    <span class="keywordflow">if</span> ret != 0:</div><div class="line">        <span class="keywordflow">print</span> (<span class="stringliteral">&quot;stop grabbing fail! ret[0x%x]&quot;</span> % ret)</div><div class="line">        sys.exit()</div><div class="line"></div><div class="line">    <span class="comment"># Turn off the device</span></div><div class="line">    ret = cam.MV_CC_CloseDevice()</div><div class="line">    <span class="keywordflow">if</span> ret != 0:</div><div class="line">        <span class="keywordflow">print</span> (<span class="stringliteral">&quot;close deivce fail! ret[0x%x]&quot;</span> % ret)</div><div class="line">        sys.exit()</div><div class="line"></div><div class="line">    <span class="comment"># Destroy the handle</span></div><div class="line">    ret = cam.MV_CC_DestroyHandle()</div><div class="line">    <span class="keywordflow">if</span> ret != 0:</div><div class="line">        <span class="keywordflow">print</span> (<span class="stringliteral">&quot;destroy handle fail! ret[0x%x]&quot;</span> % ret)</div><div class="line">        sys.exit()</div><div class="line"></div><div class="line">    <span class="comment"># Release SDK resources</span></div><div class="line">    MvCamera.MV_CC_Finalize()</div></div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>For sample code of enumerating devices and creating camera instance, refer to the chapter <a class="el" href="_xE5_x88_x9D_xE5_xA7_x8B_xE5_x8C_x96_xE7_x9B_xB8_xE6_x9C_xBA.html">Camera Initialization</a>. <br />
</dd></dl>
</div></div></div><div><div id="eventGrab"><div class="subparamswhite">The following sample codes show the process of frame grabber frame start event.</div></div></div><div><div id="eventGrab"><div class="subparamswhite"> <div class="fragment"><div class="line"><span class="comment"># Event callback function</span></div><div class="line">stEventInfo = POINTER(MV_EVENT_OUT_INFO)</div><div class="line">EventInfoCallBack = <a class="code" href="namespace_parametrize_camera___area_scan_i_o_settings.html#a3bae6d695a340d90cc6e249839d03825">winfun_ctype</a>(<span class="keywordtype">None</span>, stEventInfo, c_void_p)</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">def </span><a class="code" href="namespace_events___interface.html#ab59b303fa8bf249d7233b2879322c040">event_callback</a>(pEventInfo, pUser):</div><div class="line">    stPEventInfo = cast(pEventInfo, POINTER(MV_EVENT_OUT_INFO)).contents</div><div class="line">    nBlockId = stPEventInfo.nBlockIdHigh</div><div class="line">    nBlockId = (nBlockId &lt;&lt; 32) + stPEventInfo.nBlockIdLow</div><div class="line">    nTimestamp = stPEventInfo.nTimestampHigh</div><div class="line">    nTimestamp = (nTimestamp &lt;&lt; 32) + stPEventInfo.nTimestampLow</div><div class="line">    <span class="keywordflow">if</span> stPEventInfo:</div><div class="line">        print(<span class="stringliteral">&quot;EventName[%s], EventId[%u], BlockId[%d], Timestamp[%d]&quot;</span> % (stPEventInfo.EventName.decode(<span class="stringliteral">&#39;UTF-8&#39;</span>),</div><div class="line">                                                                          stPEventInfo.nEventID, nBlockId, nTimestamp))</div><div class="line"></div><div class="line">EVENT_CALL_BACK_FUN = <a class="code" href="namespace_events___interface.html#aab25803c5c5aa89135648c3caf6b95b6">EventInfoCallBack</a>(event_callback)</div><div class="line"></div><div class="line"></div><div class="line"><span class="keywordflow">if</span> __name__ == <span class="stringliteral">&quot;__main__&quot;</span>:</div><div class="line">    <span class="keywordflow">try</span>:</div><div class="line">        <span class="comment"># Initialize SDK resources</span></div><div class="line">        MvCamera.MV_CC_Initialize()</div><div class="line"></div><div class="line">        interfaceList = MV_INTERFACE_INFO_LIST()</div><div class="line">        transportLayerType = MV_GIGE_INTERFACE | MV_CAMERALINK_INTERFACE | MV_CXP_INTERFACE | MV_XOF_INTERFACE</div><div class="line"></div><div class="line">        <span class="comment"># Enumerate frame grabbers</span></div><div class="line">        ret = MvCamera.MV_CC_EnumInterfaces(transportLayerType, interfaceList)</div><div class="line">        <span class="keywordflow">if</span> ret != 0:</div><div class="line">            print(<span class="stringliteral">&quot;enum interfaces fail! ret[0x%x]&quot;</span> % ret)</div><div class="line">            sys.exit()</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> interfaceList.nInterfaceNum == 0:</div><div class="line">            print(<span class="stringliteral">&quot;find no interface!&quot;</span>)</div><div class="line">            sys.exit()</div><div class="line"></div><div class="line">        print(<span class="stringliteral">&quot;Find %d interfaces!&quot;</span> % interfaceList.nInterfaceNum)</div><div class="line">        <a class="code" href="namespace_events___interface.html#a9b2d64d2454f4b0d02f048a1b62ffae3">print_interface_info</a>(interfaceList)</div><div class="line"></div><div class="line">        nInterfaceIndex = input(<span class="stringliteral">&quot;please input the number of the interface to connect:&quot;</span>)</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> int(nInterfaceIndex) &gt;= interfaceList.nInterfaceNum:</div><div class="line">            print(<span class="stringliteral">&quot;input error!&quot;</span>)</div><div class="line">            sys.exit()</div><div class="line"></div><div class="line">        <span class="comment"># Create a camera instance</span></div><div class="line">        cam_instance = MvCamera()</div><div class="line">        interface_instance = MvCamera()</div><div class="line"></div><div class="line">        <span class="comment"># Select the frame grabber, and create a handle</span></div><div class="line">        curInterface = cast(interfaceList.pInterfaceInfos[int(nInterfaceIndex)], POINTER(MV_INTERFACE_INFO)).contents</div><div class="line"></div><div class="line">        ret = interface_instance.MV_CC_CreateInterface(curInterface)</div><div class="line">        <span class="keywordflow">if</span> ret != 0:</div><div class="line">            <span class="keywordflow">raise</span> Exception(<span class="stringliteral">&quot;create interface handle fail! ret[0x%x]&quot;</span> % ret)</div><div class="line"></div><div class="line">        <span class="comment"># Turn on the frame grabber</span></div><div class="line">        ret = interface_instance.MV_CC_OpenInterface()</div><div class="line">        <span class="keywordflow">if</span> ret != 0:</div><div class="line">            <span class="keywordflow">raise</span> Exception(<span class="stringliteral">&quot;open interface fail! ret[0x%x]&quot;</span> % ret)</div><div class="line">        <span class="keywordflow">else</span>:</div><div class="line">            print(<span class="stringliteral">&quot;open interface success&quot;</span>)</div><div class="line"></div><div class="line">        <span class="comment"># Enable the ReceiveImageFrameStart0 event of frame grabber</span></div><div class="line">        ret = interface_instance.MV_CC_EventNotificationOn(<span class="stringliteral">&quot;ReceiveImageFrameStart0&quot;</span>)</div><div class="line">        <span class="keywordflow">if</span> ret != 0:</div><div class="line">            <span class="keywordflow">raise</span> Exception(<span class="stringliteral">&quot;Set interface event notification on fail! ret[0x%x]&quot;</span> % ret)</div><div class="line"></div><div class="line">        <span class="comment"># Register an event callback of frame grabber</span></div><div class="line">        ret = interface_instance.MV_CC_RegisterEventCallBackEx(<span class="stringliteral">&quot;ReceiveImageFrameStart0&quot;</span>, EVENT_CALL_BACK_FUN, <span class="keywordtype">None</span>)</div><div class="line">        <span class="keywordflow">if</span> ret != 0:</div><div class="line">            <span class="keywordflow">raise</span> Exception(<span class="stringliteral">&quot;register event callback fail! ret [0x%x]&quot;</span> % ret)</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment"># Turn off the frame grabber</span></div><div class="line">        interface_instance.MV_CC_CloseInterface()</div><div class="line"></div><div class="line">        <span class="comment"># Destroy frame grabber handle</span></div><div class="line">        interface_instance.MV_CC_DestroyInterface()</div><div class="line">    <span class="keywordflow">except</span> Exception <span class="keyword">as</span> e:</div><div class="line">        print(e)</div><div class="line">        cam_instance.MV_CC_CloseDevice()</div><div class="line">        cam_instance.MV_CC_DestroyHandle()</div><div class="line">        interface_instance.MV_CC_CloseInterface()</div><div class="line">        interface_instance.MV_CC_DestroyInterface()</div><div class="line"></div><div class="line">    <span class="keywordflow">finally</span>:</div><div class="line">        <span class="comment"># Release SDK resources</span></div><div class="line">        MvCamera.MV_CC_Finalize()</div></div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>For sample code of enumerating devices and creating frame grabber instance, refer to the chapter <a class="el" href="_xE5_x88_x9D_xE5_xA7_x8B_xE5_x8C_x96_xE9_x87_x87_xE9_x9B_x86_xE5_x8D_xA1.html">Frame Grabber Initialization</a>. <br />
  </dd></dl>
<div id="abnormal"> <div class="mainparams"> <h2 id="异常事件">Exception Alarm Event</h2>
</div></div></div></div></div><div><div id="eventGrab"><div class="subparamswhite"><div id="abnormal"><div class="mainparams"> </div> <div class="subparamswhite"> </div></div></div></div></div><div><div id="eventGrab"><div class="subparamswhite"><div id="abnormal"><div class="subparamswhite">Exception alarm events can be obtained directly from the SDK. The handling process of these events: register event, get event, and unregister from event.</div></div></div></div></div><div><div id="eventGrab"><div class="subparamswhite"><div id="abnormal"><div class="subparamswhite"> <ol>
<li>
<p class="startli"></p>
<p class="interli"><b>Register Event</b>: Call <a class="el" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE5_x8F_x8A_xE5_xBC_x82_xE5_xB8_xB8.html#gad407b94a499741e5e05aebfd7314ee44" title="Registers an exception callback.">MV_CC_RegisterExceptionCallBack()</a> to register exception event. Exception will be reported to SDK.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"></p>
<p class="interli"><b>Get Event</b>: When exception occurs in SDK, exception callback function will be triggered, pushing exception alarm event to the user.</p>
<dl class="section attention"><dt>Attention</dt><dd>Avoid calling the event callback function for operations that require more time, otherwise the subsequent event information push will be blocked. </dd></dl>
</li>
<li>
<p class="startli"></p>
<p class="interli"><b>Unregister from Event</b>: Call <a class="el" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE5_x8F_x8A_xE5_xBC_x82_xE5_xB8_xB8.html#gad407b94a499741e5e05aebfd7314ee44" title="Registers an exception callback.">MV_CC_RegisterExceptionCallBack()</a> to unregister from exception alarm event. When exception callback function is NULL, you can unsubscribe from the exception alarm event of frame grabbers or the camera instance.</p>
<p class="interli"></p>
<p class="interli">The following sample codes show how to subscribe to, handle, and unsubscribe from exception alarm event.</p>
<div class="fragment"><div class="line">ExceptionInfoCallBack = <a class="code" href="namespace_parametrize_camera___area_scan_i_o_settings.html#a3bae6d695a340d90cc6e249839d03825">winfun_ctype</a>(<span class="keywordtype">None</span>, c_uint, c_void_p)</div><div class="line"><span class="keyword">def </span>exception_callback(MsgType, pUser):</div><div class="line">    <span class="keywordflow">print</span> (<span class="stringliteral">&quot;exception_callback Recv MsgType[%d] &quot;</span> % (MsgType))</div><div class="line"></div><div class="line">CALL_BACK_FUN = ExceptionInfoCallBack(exception_callback)</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="keywordflow">if</span> __name__ == <span class="stringliteral">&quot;__main__&quot;</span>:</div><div class="line">    <span class="comment"># Initialize SDK resources</span></div><div class="line">    MvCamera.MV_CC_Initialize()</div><div class="line">    </div><div class="line"></div><div class="line">    <span class="comment"># Enumerate cameras</span></div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment"># Create the camera instance</span></div><div class="line">    cam = MvCamera()</div><div class="line"></div><div class="line">    <span class="comment"># Select a device, and create a handle</span></div><div class="line">    stDeviceList = cast(deviceList.pDeviceInfo[int(nConnectionNum)], POINTER(MV_CC_DEVICE_INFO)).contents</div><div class="line"></div><div class="line">    ret = cam.MV_CC_CreateHandle(stDeviceList)</div><div class="line">    <span class="keywordflow">if</span> ret != 0:</div><div class="line">        <span class="keywordflow">print</span> (<span class="stringliteral">&quot;create handle fail! ret[0x%x]&quot;</span> % ret)</div><div class="line">        sys.exit()</div><div class="line"></div><div class="line">    <span class="comment"># Turn on the device</span></div><div class="line">    ret = cam.MV_CC_OpenDevice()</div><div class="line">    <span class="comment">#ret = cam.MV_CC_OpenDevice(MV_ACCESS_Exclusive, 0)</span></div><div class="line">    <span class="keywordflow">if</span> ret != 0:</div><div class="line">        <span class="keywordflow">print</span> (<span class="stringliteral">&quot;open device fail! ret[0x%x]&quot;</span> % ret)</div><div class="line">        sys.exit()</div><div class="line">    </div><div class="line"></div><div class="line">    <span class="comment"># Register an event callback</span></div><div class="line">    ret = cam.MV_CC_RegisterExceptionCallBack(CALL_BACK_FUN,<span class="keywordtype">None</span>)</div><div class="line">    <span class="keywordflow">if</span> ret != 0:</div><div class="line">        <span class="keywordflow">print</span> (<span class="stringliteral">&quot;register event callback fail! ret [0x%x]&quot;</span> % ret)</div><div class="line">        sys.exit()</div><div class="line"></div><div class="line">    <span class="comment"># Start grabbing images</span></div><div class="line">    <span class="keywordflow">print</span> (<span class="stringliteral">&quot;press a key to stop grabbing.&quot;</span>)</div><div class="line">    <a class="code" href="namespace_parametrize_camera___area_scan_i_o_settings.html#ada091daac0b443feeefd371689422720">press_any_key_exit</a>()</div><div class="line"></div><div class="line">    <span class="keywordflow">print</span> (<span class="stringliteral">&quot;press a key to stop grabbing.&quot;</span>)</div><div class="line">    msvcrt.getch()</div><div class="line"></div><div class="line">    <span class="comment"># Stop grabbing images</span></div><div class="line">    ret = cam.MV_CC_StopGrabbing()</div><div class="line">    <span class="keywordflow">if</span> ret != 0:</div><div class="line">        <span class="keywordflow">print</span> (<span class="stringliteral">&quot;stop grabbing fail! ret[0x%x]&quot;</span> % ret)</div><div class="line">        sys.exit()</div><div class="line"></div><div class="line">    <span class="comment"># Turn off the device</span></div><div class="line">    ret = cam.MV_CC_CloseDevice()</div><div class="line">    <span class="keywordflow">if</span> ret != 0:</div><div class="line">        <span class="keywordflow">print</span> (<span class="stringliteral">&quot;close deivce fail! ret[0x%x]&quot;</span> % ret)</div><div class="line">        sys.exit()</div><div class="line"></div><div class="line">    <span class="comment"># Destroy the handle</span></div><div class="line">    ret = cam.MV_CC_DestroyHandle()</div><div class="line">    <span class="keywordflow">if</span> ret != 0:</div><div class="line">        <span class="keywordflow">print</span> (<span class="stringliteral">&quot;destroy handle fail! ret[0x%x]&quot;</span> % ret)</div><div class="line">        sys.exit()</div><div class="line"></div><div class="line">    <span class="comment"># Release SDK resources</span></div><div class="line">    MvCamera.MV_CC_Finalize()</div></div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>For sample code of enumerating devices and creating camera instance, refer to the chapter <a class="el" href="_xE5_x88_x9D_xE5_xA7_x8B_xE5_x8C_x96_xE7_x9B_xB8_xE6_x9C_xBA.html">Camera Initialization</a>. </dd></dl>
</li>
</ol>
</div> </div></div></div></div><div><div id="eventGrab"><div class="subparamswhite"> <div id="cache"> <div class="mainparams"> <h2 id="事件缓存调节">Adjust Event Buffer</h2>
</div></div></div></div></div><div><div id="eventGrab"><div class="subparamswhite"><div id="cache"><div class="mainparams"> </div> <div class="subparamswhite"> </div></div></div></div></div><div><div id="eventGrab"><div class="subparamswhite"><div id="cache"><div class="subparamswhite">Event generated by GigE cameras uses socket buffer area, and there is no need to configure extra buffer area. Event generated by U3V devices is reported via event endpoint or link. There are 5 buffer nodes by default for receiving event in SDK. Slow software processing in the upper layer and high frequency event-reporting may result in insufficient SDK buffer, leading to event loss. You can edit the number of event buffer nodes of U3V camera in SDK by calling <a class="el" href="group___u3_v_xE8_xAE_xBE_xE5_xA4_x87.html#ga9a53218aa7eb696825f6d2cb876d9c8e" title="Sets the number of event buffer nodes of USB3 vision devices.">MV_USB_SetEventNodeNum()</a>.</div></div></div></div></div><div><div id="eventGrab"><div class="subparamswhite"><div id="cache"><div class="subparamswhite"> <div class="fragment"><div class="line"><span class="comment"># Set the number of event buffer areas of USB3 vision devices in SDK</span></div><div class="line">EventNodeNum = 5</div><div class="line">ret = cam.MV_USB_SetEventNodeNum(EventNodeNum)</div><div class="line"><span class="keywordflow">if</span> ret != 0:</div><div class="line">    <span class="keywordflow">print</span> (<span class="stringliteral">&quot;MV_USB_SetEventNodeNum fail! ret[0x%x]&quot;</span> % ret)</div><div class="line">    sys.exit()</div></div><!-- fragment --> </div> </div></div></div></div><div><div id="eventGrab"><div class="subparamswhite"> <div> <br />
 <br />
 <br />
 <table width="60%">
<tr>
<td>Previous: <a class="el" href="_xE8_xAE_xBE_xE7_xBD_xAE_xE5_x8F_x82_xE6_x95_xB0.html">Parameter Configuration</a> </td><td>Next: <a class="el" href="_xE9_x87_x87_xE9_x9B_x86_xE5_x9B_xBE_xE5_x83_x8F.html">Image Acquisition</a>  </td></tr>
</table>
</div> </div> </div></div></div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<div class="footer" style="text-align: right;">
	<hr/>
	<small></small>
</div>
</body>
</html>