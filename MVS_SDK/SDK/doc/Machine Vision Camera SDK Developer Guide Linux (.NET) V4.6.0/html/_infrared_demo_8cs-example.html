<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="custom-style.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
	<div style="overflow: hidden;">
		<div style="height: 57px;min-width: 1039px;background-size: auto 100%;background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABwgAAAABCAYAAADKO/rAAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAABRSURBVFhH7dUxCoBADEXB5LK5/w1iIaLIrsgWNs50Sf/4WVUd8HOZGd1nCqMbGNMPrNMPrJv1cvz0A3OjfuwPvDPrxf7A7t7IlX7gmX74VsQGguw4S6+UnSYAAAAASUVORK5CYII=');">
			<img src="titleleft.png" style="float: left;"/>
			<img src="titleright.png" alt="" style="float: right;" />
		</div>
	</div>
<!-- 制作者 Doxygen 1.8.15 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>首页</span></a></li>
      <li><a href="_xE5_x8F_x91_xE7_x89_x88_xE8_xAF_xB4_xE6_x98_x8E.html"><span>发版说明</span></a></li>
      <li><a href="usergroup0.html"><span>编程引导</span></a></li>
      <li><a href="modules.html"><span>API参考</span></a></li>
      <li><a href="_xE7_xA4_xBA_xE4_xBE_x8B_xE7_xA8_x8B_xE5_xBA_x8F_xE6_xA6_x82_xE8_xA7_x88.html"><span>示例程序概览</span></a></li>
      <li><a href="_xE6_xB3_x95_xE5_xBE_x8B_xE5_xA3_xB0_xE6_x98_x8E.html"><span>法律声明</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">InfraredDemo.cs</div>  </div>
</div><!--header-->
<div class="contents">
<p>红外相机基础功能</p>
<p>该示例演示如何实现红外相机的基本功能。 <br />
 您可从示例程序文件夹的 AreaScanCamera -&gt; InfraredDemo 文件夹下获取该示例。 <br />
 您还可参考<a class="el" href="_form_region_setting_8cs-example.html">FormRegionSetting.cs</a> 和<a class="el" href="_form_alarm_setting_8cs-example.html">FormAlarmSetting.cs</a> ，了解配置红外相机的温度显示区域和温度报警参数。</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> MvCameraControl;</div><div class="line"><span class="keyword">using</span> System;</div><div class="line"><span class="keyword">using</span> System.Collections.Generic;</div><div class="line"><span class="keyword">using</span> System.Collections.ObjectModel;</div><div class="line"><span class="keyword">using</span> System.ComponentModel;</div><div class="line"><span class="keyword">using</span> System.Data;</div><div class="line"><span class="keyword">using</span> System.Diagnostics;</div><div class="line"><span class="keyword">using</span> System.Drawing;</div><div class="line"><span class="keyword">using</span> System.Drawing.Imaging;</div><div class="line"><span class="keyword">using</span> System.IO;</div><div class="line"><span class="keyword">using</span> System.Linq;</div><div class="line"><span class="keyword">using</span> System.Runtime.InteropServices;</div><div class="line"><span class="keyword">using</span> System.Text;</div><div class="line"><span class="keyword">using</span> System.Threading;</div><div class="line"><span class="keyword">using</span> System.Windows.Forms;</div><div class="line"></div><div class="line"><span class="keyword">namespace </span><a class="code" href="namespace_infrared_demo.html">InfraredDemo</a></div><div class="line">{</div><div class="line">    <span class="keyword">public</span> <span class="keyword">partial class </span><a class="code" href="namespace_infrared_demo.html">InfraredDemo</a> : Form</div><div class="line">    {</div><div class="line">        List&lt;IDeviceInfo&gt; deviceInfoList = <span class="keyword">new</span> List&lt;IDeviceInfo&gt;();</div><div class="line">        <a name="_a0"></a><a class="code" href="interface_i_device.html">IDevice</a> device = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">        <span class="keywordtype">bool</span> isOpen = <span class="keyword">false</span>;                <span class="comment">// ch:是否打开设备 | en:Whether to open device</span></div><div class="line">        <span class="keywordtype">bool</span> isGrabbing = <span class="keyword">false</span>;            <span class="comment">// ch:是否开始抓图 | en:Whether to start grabbing</span></div><div class="line">        IntPtr displayHandle = IntPtr.Zero; <span class="comment">// ch:用于显示图像的控件句柄 | en:Handle of the image display control</span></div><div class="line">        Thread m_hReceiveThread = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">        <span class="comment">// ch:判断用户自定义像素格式 | en:Determine custom pixel format</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">const</span> Int32 CUSTOMER_PIXEL_FORMAT = unchecked((Int32)0x80000000);</div><div class="line">        <span class="keyword">public</span> <span class="keyword">const</span> Int32 TEMP_CHUNK_ID_TEST = unchecked((Int32)0x00510002);                    <span class="comment">// ch:测温区域信息 | en:Temp Measurement region information</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">const</span> Int32 TEMP_CHUNK_ID_ALARM = unchecked((Int32)0x00510003);                 <span class="comment">// ch:测温警告信息 | en:Temp Measurement alarm information</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">const</span> Int32 TEMP_CHUNK_ID_RAW_DATA = unchecked((Int32)0x00510004);               <span class="comment">// ch:全屏灰度数据 | en:Full ScreenRaw data</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">const</span> Int32 TEMP_CHUNK_ID_FULL_SCREEN_DATA = unchecked((Int32)0x00510005);       <span class="comment">// ch:全屏温度数据 | en:Full Screen Temperature data</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">const</span> Int32 TEMP_CHUNK_ID_MIN_MAX_TEMP = unchecked((Int32)0x00510006);           <span class="comment">// ch:最低温最高温 | en:Min Temp &amp; Max Temp</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">const</span> Int32 TEMP_CHUNK_ID_OSD_INFO = unchecked((Int32)0x00510007);               <span class="comment">// ch:OSD相关参数 | en:OSD Related parameters</span></div><div class="line"></div><div class="line">        <span class="keyword">public</span> <span class="keyword">const</span> Int32 TEMP_ROI_TYPE_POINT = 0;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">const</span> Int32 TEMP_ROI_TYPE_LINE = 1;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">const</span> Int32 TEMP_ROI_TYPE_POLYGON = 2;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">const</span> Int32 TEMP_ROI_TYPE_CIRCLE = 3;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> <span class="keyword">const</span> Int32 TEMP_ALARM_LEVER_PRE = 0;        <span class="comment">// ch:报警等级-预警 | en；Alarm level-Early warning</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">const</span> Int32 TEMP_ALARM_LEVER_WARN = 1;       <span class="comment">// ch:报警等级-警告 | en:Alarm level-Warning</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">const</span> Int32 TEMP_ALARM_LEVER_NORMAL = 2;     <span class="comment">// ch:报警等级-正常 | en:Alarm level-Normal</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">const</span> Int32 TEMP_ALARM_LEVER_RECOVER = 3;    <span class="comment">// ch:报警等级-解除等级 | en:Alarm level-Recover</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">const</span> Int32 TEMP_ALARM_TYPE_MAX = 0;         <span class="comment">// ch:报警类型-最大值 | en:Alarm type-Maximum Temperature Difference</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">const</span> Int32 TEMP_ALARM_TYPE_MIN = 1;         <span class="comment">// ch:报警类型-最小值 | en:Alarm type-Minimum Temperature Difference</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">const</span> Int32 TEMP_ALARM_TYPE_AVG = 2;         <span class="comment">// ch:报警类型-平均值 | en:Alarm type-Average Temperature Difference</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">const</span> Int32 TEMP_ALARM_TYPE_DIFFER = 3;      <span class="comment">// ch:报警类型-差异值 | en:Alarm type-Variation Temperature Difference</span></div><div class="line"></div><div class="line">        <span class="keyword">public</span> <a class="code" href="namespace_infrared_demo.html">InfraredDemo</a>()</div><div class="line">        {</div><div class="line">            InitializeComponent();</div><div class="line">            EnableControls(<span class="keyword">false</span>);</div><div class="line">            this.Load += <span class="keyword">new</span> EventHandler(this.InfraredDemo_Load);</div><div class="line">            displayHandle = pbDisplay.Handle;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">private</span> <span class="keywordtype">void</span> InfraredDemo_Load(<span class="keywordtype">object</span> sender, EventArgs e)</div><div class="line">        {</div><div class="line">            <span class="comment">// ch: 初始化 SDK | en: Initialize SDK</span></div><div class="line">            <a name="_a1"></a><a class="code" href="class_s_d_k_system.html">SDKSystem</a>.<a name="a2"></a><a class="code" href="class_s_d_k_system.html#a7013f5c07ae783a105f910ecb2c7b800">Initialize</a>();</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> FormRegionSetting RegionSettingForm = <span class="keyword">null</span>;   <span class="comment">// 区域设置界面</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> FormAlarmSetting AlarmSettingForm = <span class="keyword">null</span>;    <span class="comment">// 告警设置界面</span></div><div class="line">        </div><div class="line">        <span class="keyword">public</span> <span class="keyword">const</span> Int32  TEMP_REGION_COUNT = 22;                <span class="comment">// ch:全部区域个数 | en:Number of all region</span></div><div class="line">        <span class="comment">// ch:点 | en：Point</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">struct </span>IFR_POINT</div><div class="line">        {</div><div class="line">            <span class="keyword">public</span> UInt32 x;</div><div class="line">            <span class="keyword">public</span> UInt32 y;</div><div class="line">        }</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">// ch:多边形区域 | en:Polygon region</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">struct </span>IFR_POLYGON</div><div class="line">        {</div><div class="line">            <span class="keyword">public</span> UInt32 pointNum;              <span class="comment">// &lt;ch:多边形实际顶点数 | en:Point of Polygon region</span></div><div class="line">            <span class="keyword">public</span> UInt32 circleRadius;          <span class="comment">// &lt;ch:测温区域圆半径 | en:CircleRadius of Temperature Measurement region</span></div><div class="line">            <span class="keyword">public</span> IFR_POINT circlepoint;              <span class="comment">// &lt;ch:测温区域的圆心点 | en:Circlepoint of Temperature Measurement region</span></div><div class="line"></div><div class="line">            [MarshalAs(UnmanagedType.ByValArray, SizeConst = TEMP_REGION_COUNT)]</div><div class="line">            <span class="keyword">public</span> IFR_POINT[] pointList;               <span class="comment">// &lt;ch:顶点坐标 | en:PointList</span></div><div class="line">        }</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">// ch:单个区域测温结果 | en:Temp Measurement Result of Temperature Region</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">struct </span>IFR_OUTCOME_INFO</div><div class="line">        {</div><div class="line">            <span class="keyword">public</span> Byte enable;             <span class="comment">// &lt;ch:是否启用：0-否,1-是 | en:Enable: 0-disable,1-Enable</span></div><div class="line">            <span class="keyword">public</span> Byte regionId;           <span class="comment">// &lt;ch:区域ID | en:RegionId</span></div><div class="line"></div><div class="line">            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 34)]</div><div class="line">            <span class="keyword">public</span> Byte[] reserved;</div><div class="line"></div><div class="line">            <span class="keyword">public</span> UInt32 regiontype;         <span class="comment">// &lt;ch:区域类型 0：点 1：线 2：多边形  3:圆 | en:Region Type 0:point 1:Line 2:Polygon</span></div><div class="line"></div><div class="line">            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 32)]</div><div class="line">            <span class="keyword">public</span> Byte[] name;                      <span class="comment">// &lt;ch:区域名称 | en:Region Name</span></div><div class="line"></div><div class="line">            <span class="keyword">public</span> UInt32 emissionRate;       <span class="comment">// &lt;ch:发射率: [1，100] | en:Emissivity</span></div><div class="line">            <span class="keyword">public</span> Int32 minTmp;             <span class="comment">// &lt;ch:最低温度: [-400, 10000]，单位0.1℃ | en:Minimum Temperature: [-400, 10000]，Unit:0.1℃</span></div><div class="line">            <span class="keyword">public</span> Int32 maxTmp;             <span class="comment">// &lt;ch:最高温度: [-400, 10000]，单位0.1℃ | en:Maximum Temperature: [-400, 10000]，Unit:0.1℃</span></div><div class="line">            <span class="keyword">public</span> Int32 avrTmp;             <span class="comment">// &lt;ch:平均温度: [-400, 10000]，单位0.1℃ | en:Average Temperature: [-400, 10000]，Unit:0.1℃</span></div><div class="line">            <span class="keyword">public</span> Int32 diffTmp;            <span class="comment">// &lt;ch:温差： [0, 10400]，单位0.1℃ | en:Temperature variation:[0, 10400],Unit:0.1℃         </span></div><div class="line"></div><div class="line">            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 2)]</div><div class="line">            <span class="keyword">public</span> IFR_POINT[] points;                       <span class="comment">// &lt;ch:保存测试结果中的最高温和最低温坐标，数组下标: 0-最高温，1-最低温 | en:Save Maximum Temperature  and Minimum Temperature coordinates in the test results,Array subscript:0-Maximum Temperature,1-Minimum Temperature</span></div><div class="line"></div><div class="line">            <span class="keyword">public</span> IFR_POLYGON polygon;            <span class="comment">// &lt;ch:多边形区域 | en:Polygon region</span></div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">public</span> <span class="keyword">struct </span>IFR_TM_REGION_NUM</div><div class="line">        {</div><div class="line">            <span class="keyword">public</span> Byte pointNum;     <span class="comment">// ch:点测温个数，最大10个 | en:Number of Point Temperature region,Max:Ten</span></div><div class="line">            <span class="keyword">public</span> Byte boxNum;       <span class="comment">// ch:框测温个数，最大10个 | en:Number of polygon Temperature region,Max:Ten</span></div><div class="line">            <span class="keyword">public</span> Byte lineNum;      <span class="comment">// ch:线测温个数，最多1条 | en:Number of Line Temperature region,Max:One</span></div><div class="line">            <span class="keyword">public</span> Byte circleNum;    <span class="comment">// ch:圆测温个数，最多1个 | en:Number of Circle Temperature region,Max:One</span></div><div class="line">            <span class="keyword">public</span> Byte total;        <span class="comment">// ch:上者之和 | en:All of the above</span></div><div class="line"></div><div class="line">            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 3)]</div><div class="line">            <span class="keyword">public</span> Byte[] res;</div><div class="line">        }</div><div class="line">        <span class="comment">// ch:温度结果列表 | en:Temperature Results List</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">struct </span>IFR_OUTCOME_LIST</div><div class="line">        {</div><div class="line">            <span class="keyword">public</span> IFR_TM_REGION_NUM regionNum;                     <span class="comment">// &lt;ch:有效测温区域数量 | en:Number of effective temperature measurement region</span></div><div class="line"></div><div class="line">            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 8)]</div><div class="line">            <span class="keyword">public</span> Byte[] res;</div><div class="line"></div><div class="line">            [MarshalAs(UnmanagedType.ByValArray, SizeConst = TEMP_REGION_COUNT)]</div><div class="line">            <span class="keyword">public</span> IFR_OUTCOME_INFO[] ifrOutcome;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// ch:报警上传信息结构体 | en::Uploading information structure of Alarm</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">struct </span>IFR_ALARM_INFO</div><div class="line">        {</div><div class="line">            <span class="keyword">public</span> Byte regionId;                     <span class="comment">// &lt;ch:框序号 | en:RegionId</span></div><div class="line">            <span class="keyword">public</span> Byte alarmkey;                     <span class="comment">// &lt;ch:当前区域报警是否开启开关，上层默认配置开启 | en:Whether the current region alarm is on or off, the upper layer is on by default</span></div><div class="line">            <span class="keyword">public</span> Byte alarmRule;                    <span class="comment">// &lt;ch:规则:0-大于 1-小于 | en:Rule:0-greater than 1-Less than</span></div><div class="line">            <span class="keyword">public</span> Byte reserved0;                    <span class="comment">// &lt;ch:预留 | en:Reserve</span></div><div class="line">            <span class="keyword">public</span> UInt32 regiontype;                    <span class="comment">// &lt;ch:区域类型 0：点 1：线 2：多边形 3:圆 | en:Regiontype 0：point 1：Line 2：Polygon 3:Circle</span></div><div class="line">            <span class="keyword">public</span> UInt32 alarmType;                     <span class="comment">// &lt;ch:报警类型:0-最高温报警,1-最低温度，2-平均温度,3-温差 | en:AlarmType:0-Maximum Temperature alarm,1-Minimum Temperature,2-Average Temperature,3-Temperature variation</span></div><div class="line">            <span class="keyword">public</span> UInt32 alarmLevel;                    <span class="comment">// &lt;ch:报警级别：0-预警，1-报警，2-正常，3-解除预警 | en:Alarm Level:0-Early waining,2-Normal,3-Cancel early warning</span></div><div class="line"></div><div class="line">            <span class="keyword">public</span> Int32 measureTmpData;                         <span class="comment">// &lt;ch:测量值，单位0.1℃ | en:Temperature Measurements,Unit0.1℃</span></div><div class="line">            <span class="keyword">public</span> Int32 ruleTmpData;                            <span class="comment">// &lt;ch:规则设定值，单位0.1℃ | en:Rule Settings，Unit0.1℃</span></div><div class="line">            <span class="keyword">public</span> IFR_POLYGON polygon;                        <span class="comment">// &lt;ch:区域位置 | en:Region Location</span></div><div class="line"></div><div class="line">            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 2)]</div><div class="line">            <span class="keyword">public</span> IFR_POINT[] points;</div><div class="line"></div><div class="line">            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 16)]</div><div class="line">            <span class="keyword">public</span> Byte[] reserved1;</div><div class="line">        }</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">// ch:区域温差报警上传信息结构体 | en:Uploading information structure of  Multi Temperature Region Alarm</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">struct </span>IFR_DIFF_ALARM_INFO</div><div class="line">        {</div><div class="line">            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 2)]</div><div class="line">            <span class="keyword">public</span> Byte[] regionSet;</div><div class="line"></div><div class="line">            <span class="keyword">public</span> Byte alarmkey;                     <span class="comment">// &lt;ch:当前区域报警是否开启开关 | en:Whether the current region alarm is on</span></div><div class="line">            <span class="keyword">public</span> Byte reserved0;                    <span class="comment">// &lt;ch:预留 | en:Reserve</span></div><div class="line">            <span class="keyword">public</span> UInt32 alarmType;                     <span class="comment">// &lt;ch:报警类型:0-最高温报警,1-最低温度，2-平均温度,3-温差 | en:AlarmType:0-Maximum Temperature alarm,1-Minimum Temperature,2-Average Temperature,3-Temperature variation</span></div><div class="line">            <span class="keyword">public</span> Byte alarmRule;                    <span class="comment">// &lt;ch:规则:0-大于 1-小于 | en:Rule:0-greater than 1-Less than</span></div><div class="line"></div><div class="line">            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 3)]</div><div class="line">            <span class="keyword">public</span> Byte[] reserved1;</div><div class="line"></div><div class="line">            <span class="keyword">public</span> UInt32 alarmLevel;                    <span class="comment">// &lt;ch:报警级别：0-预警，1-报警，2-正常，3-解除预警 | en:Alarm Level:0-Early waining,2-Normal,3-Cancel early warning</span></div><div class="line"></div><div class="line">            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 2)]</div><div class="line">            <span class="keyword">public</span> UInt32[] measureTmpData;</div><div class="line"></div><div class="line">            <span class="keyword">public</span> Int32 ruleTmpData;                            <span class="comment">// &lt;ch:规则设定值，单位0.1℃ | en:Rule Settings，Unit0.1℃                             </span></div><div class="line"></div><div class="line">            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 4)]</div><div class="line">            <span class="keyword">public</span> Byte[] reserved2;</div><div class="line">        }</div><div class="line"></div><div class="line"></div><div class="line">        <span class="keyword">public</span> <span class="keyword">struct </span>IFR_ALARM_UPLOAD_INFO</div><div class="line">        {</div><div class="line">            [MarshalAs(UnmanagedType.ByValArray, SizeConst = TEMP_REGION_COUNT)]</div><div class="line">            <span class="keyword">public</span> IFR_ALARM_INFO[] alarmOutcome;            <span class="comment">// ch:单区域报警结果 | en:Temperature Region Alarm result</span></div><div class="line"></div><div class="line">            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 4)]</div><div class="line">            <span class="keyword">public</span> IFR_DIFF_ALARM_INFO[] alarmDiffOutcome;   <span class="comment">// ch:区域间温差报警结果 | en: Multi Temperature Region Alarm result    </span></div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// ch:全屏温度信息 | en:Full Screen Temperature information</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">struct </span>IFR_FULL_SCREEN_MAX_MIN_INFO</div><div class="line">        {</div><div class="line">            <span class="keyword">public</span> UInt32 nMaxTemp;</div><div class="line">            <span class="keyword">public</span> UInt32 nMinTemp;</div><div class="line"></div><div class="line">            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 4)]</div><div class="line">            <span class="keyword">public</span> Byte[] reserved;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// ch:测温区域显示规则 | en:Temperature region Display Rule</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">struct </span>IRF_REGION_DISP_INFO</div><div class="line">        {</div><div class="line">            <span class="keyword">public</span> UInt32 regionDispIndex;                    </div><div class="line">            <span class="keyword">public</span> UInt32 regionDispEnable;                   </div><div class="line">            <span class="keyword">public</span> UInt32 regionMaxTempDispEnable;            </div><div class="line">            <span class="keyword">public</span> UInt32 regionMinTempDispEnable;            </div><div class="line">            <span class="keyword">public</span> UInt32 regionAvgTempDispEnable;            </div><div class="line">            <span class="keyword">public</span> UInt32 regionAlarmDispEnable;              </div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// ch:区域测温图像叠加特征信息结构体 | en:Information Structure of superimposed feature  of region temperature measurement image</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">struct </span>IRF_OSD_INFO</div><div class="line">        {</div><div class="line">            <span class="keyword">public</span> UInt32 legendDisplayEnable;    </div><div class="line">            <span class="keyword">public</span> UInt32 osdProcessor;           </div><div class="line">            [MarshalAs(UnmanagedType.ByValArray, SizeConst = TEMP_REGION_COUNT)]</div><div class="line">            <span class="keyword">public</span> IRF_REGION_DISP_INFO[] regionDispRules;   <span class="comment">// ch:区域间温差报警结果 | en: Multi Temperature Region Alarm result  </span></div><div class="line">        } </div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">// ch:显示错误信息 | en:Show error message</span></div><div class="line">        <span class="keyword">private</span> <span class="keywordtype">void</span> ShowErrorMsg(<span class="keywordtype">string</span> csMessage, <span class="keywordtype">int</span> nErrorNum)</div><div class="line">        {</div><div class="line">            <span class="keywordtype">string</span> errorMsg;</div><div class="line">            <span class="keywordflow">if</span> (nErrorNum == 0)</div><div class="line">            {</div><div class="line">                errorMsg = csMessage;</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                errorMsg = csMessage + <span class="stringliteral">&quot;: Error =&quot;</span> + String.Format(<span class="stringliteral">&quot;{0:X}&quot;</span>, nErrorNum);</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="keywordflow">switch</span> (nErrorNum)</div><div class="line">            {</div><div class="line">                <span class="keywordflow">case</span> <a name="_a3"></a><a class="code" href="class_mv_error.html">MvError</a>.<a name="a4"></a><a class="code" href="class_mv_error.html#a872612325a346aeaae5a1b64d58d33bb">MV_E_HANDLE</a>: errorMsg += <span class="stringliteral">&quot;Error or invalid handle &quot;</span>; <span class="keywordflow">break</span>;</div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="class_mv_error.html">MvError</a>.<a name="a5"></a><a class="code" href="class_mv_error.html#a78daeee84f626f0cb70ad9ce5dfefb11">MV_E_SUPPORT</a>: errorMsg += <span class="stringliteral">&quot;Not supported function &quot;</span>; <span class="keywordflow">break</span>;</div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="class_mv_error.html">MvError</a>.<a name="a6"></a><a class="code" href="class_mv_error.html#abbb4b86153b7a61f31e116d8545ab477">MV_E_BUFOVER</a>: errorMsg += <span class="stringliteral">&quot;Cache is full &quot;</span>; <span class="keywordflow">break</span>;</div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="class_mv_error.html">MvError</a>.<a name="a7"></a><a class="code" href="class_mv_error.html#a7a8ad6a48f901409514f176528d6091e">MV_E_CALLORDER</a>: errorMsg += <span class="stringliteral">&quot;Function calling order error &quot;</span>; <span class="keywordflow">break</span>;</div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="class_mv_error.html">MvError</a>.<a name="a8"></a><a class="code" href="class_mv_error.html#a9d5c9d063a55d66341c626f3276714a7">MV_E_PARAMETER</a>: errorMsg += <span class="stringliteral">&quot;Incorrect parameter &quot;</span>; <span class="keywordflow">break</span>;</div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="class_mv_error.html">MvError</a>.<a name="a9"></a><a class="code" href="class_mv_error.html#ad414e45c6ec37da355a1bcc17ade796e">MV_E_RESOURCE</a>: errorMsg += <span class="stringliteral">&quot;Applying resource failed &quot;</span>; <span class="keywordflow">break</span>;</div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="class_mv_error.html">MvError</a>.<a name="a10"></a><a class="code" href="class_mv_error.html#ae3f561cad22f18b997f9ed8baeba4ad2">MV_E_NODATA</a>: errorMsg += <span class="stringliteral">&quot;No data &quot;</span>; <span class="keywordflow">break</span>;</div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="class_mv_error.html">MvError</a>.<a name="a11"></a><a class="code" href="class_mv_error.html#ac1d2a79bcc37edd9b66561dc3123a945">MV_E_PRECONDITION</a>: errorMsg += <span class="stringliteral">&quot;Precondition error, or running environment changed &quot;</span>; <span class="keywordflow">break</span>;</div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="class_mv_error.html">MvError</a>.<a name="a12"></a><a class="code" href="class_mv_error.html#adccff1d148354b5b2a9a3b5e51d414c2">MV_E_VERSION</a>: errorMsg += <span class="stringliteral">&quot;Version mismatches &quot;</span>; <span class="keywordflow">break</span>;</div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="class_mv_error.html">MvError</a>.<a name="a13"></a><a class="code" href="class_mv_error.html#afc905731e4a477db6af946c3b8f84efe">MV_E_NOENOUGH_BUF</a>: errorMsg += <span class="stringliteral">&quot;Insufficient memory &quot;</span>; <span class="keywordflow">break</span>;</div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="class_mv_error.html">MvError</a>.<a name="a14"></a><a class="code" href="class_mv_error.html#a7ea8cabddd8ffa33757531d63d4aad4e">MV_E_ABNORMAL_IMAGE</a>: errorMsg += <span class="stringliteral">&quot;Abnormal image, maybe incomplete image because of lost packet &quot;</span>; <span class="keywordflow">break</span>;</div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="class_mv_error.html">MvError</a>.<a name="a15"></a><a class="code" href="class_mv_error.html#a14f381758c23ec1abfcfc19b4e6fc8fc">MV_E_UNKNOW</a>: errorMsg += <span class="stringliteral">&quot;Unknown error &quot;</span>; <span class="keywordflow">break</span>;</div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="class_mv_error.html">MvError</a>.<a name="a16"></a><a class="code" href="class_mv_error.html#ad5ecf9c4dc79dee8f6d0f98e6b125539">MV_E_GC_GENERIC</a>: errorMsg += <span class="stringliteral">&quot;General error &quot;</span>; <span class="keywordflow">break</span>;</div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="class_mv_error.html">MvError</a>.<a name="a17"></a><a class="code" href="class_mv_error.html#aa7241ff53597c90b23c814617642a31b">MV_E_GC_ACCESS</a>: errorMsg += <span class="stringliteral">&quot;Node accessing condition error &quot;</span>; <span class="keywordflow">break</span>;</div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="class_mv_error.html">MvError</a>.<a name="a18"></a><a class="code" href="class_mv_error.html#a327fd975a6856e6855dc5600334a0dc6">MV_E_ACCESS_DENIED</a>: errorMsg += <span class="stringliteral">&quot;No permission &quot;</span>; <span class="keywordflow">break</span>;</div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="class_mv_error.html">MvError</a>.<a name="a19"></a><a class="code" href="class_mv_error.html#a66f4edb7598ba0fe377205bb8c7a13c1">MV_E_BUSY</a>: errorMsg += <span class="stringliteral">&quot;Device is busy, or network disconnected &quot;</span>; <span class="keywordflow">break</span>;</div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="class_mv_error.html">MvError</a>.<a name="a20"></a><a class="code" href="class_mv_error.html#a72c324a1286378d683dcd6dc1b9870d5">MV_E_NETER</a>: errorMsg += <span class="stringliteral">&quot;Network error &quot;</span>; <span class="keywordflow">break</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">            MessageBox.Show(errorMsg, <span class="stringliteral">&quot;PROMPT&quot;</span>);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">private</span> <span class="keywordtype">void</span> bnEnum_Click(<span class="keywordtype">object</span> sender, EventArgs e)</div><div class="line">        {</div><div class="line">            DeviceListAcq();</div><div class="line">            EnableControls(<span class="keyword">true</span>);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">private</span> <span class="keywordtype">void</span> DeviceListAcq()</div><div class="line">        {</div><div class="line">            <span class="comment">// ch:创建设备列表 | en:Create Device List</span></div><div class="line">            cbDeviceList.Items.Clear();</div><div class="line">            <span class="keywordtype">int</span> result = <a name="_a21"></a><a class="code" href="class_device_enumerator.html">DeviceEnumerator</a>.<a name="a22"></a><a class="code" href="class_device_enumerator.html#acb8d0cafef88484de132e372a0305e7d">EnumDevices</a>(<a class="code" href="group___xE7_x9B_xB8_xE6_x9C_xBA.html#ga0dc9b1d0b3ce8e4c07cbce297950db5c">DeviceTLayerType</a>.MvGigEDevice | <a class="code" href="group___xE7_x9B_xB8_xE6_x9C_xBA.html#ga0dc9b1d0b3ce8e4c07cbce297950db5c">DeviceTLayerType</a>.MvUsbDevice, out deviceInfoList);</div><div class="line">            <span class="keywordflow">if</span> (0 != result)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;Enumerate devices fail!&quot;</span>, 0);</div><div class="line">                <span class="keywordflow">return</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="comment">// ch:在窗体列表中显示设备名 | en:Display device name in the form list</span></div><div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; deviceInfoList.Count; i++)</div><div class="line">            {</div><div class="line">                <a name="_a23"></a><a class="code" href="interface_i_device_info.html">IDeviceInfo</a> deviceInfo = deviceInfoList[i];</div><div class="line">                <span class="keywordflow">if</span> (deviceInfo.<a name="a24"></a><a class="code" href="interface_i_device_info.html#a435a8ed5b20937cecbda46d491a8d6ed">UserDefinedName</a> != <span class="stringliteral">&quot;&quot;</span>)</div><div class="line">                {</div><div class="line">                    cbDeviceList.Items.Add(deviceInfo.<a name="a25"></a><a class="code" href="interface_i_device_info.html#ad8f8140944f4224f2d15593c36374f5d">TLayerType</a>.ToString() + <span class="stringliteral">&quot;: &quot;</span> + deviceInfo.<a class="code" href="interface_i_device_info.html#a435a8ed5b20937cecbda46d491a8d6ed">UserDefinedName</a> + <span class="stringliteral">&quot; (&quot;</span> + deviceInfo.<a name="a26"></a><a class="code" href="interface_i_device_info.html#a4787b4e3851b71705ae3f1635dd986bd">SerialNumber</a> + <span class="stringliteral">&quot;)&quot;</span>);</div><div class="line">                }</div><div class="line">                <span class="keywordflow">else</span></div><div class="line">                {</div><div class="line">                    cbDeviceList.Items.Add(deviceInfo.<a class="code" href="interface_i_device_info.html#ad8f8140944f4224f2d15593c36374f5d">TLayerType</a>.ToString() + <span class="stringliteral">&quot;: &quot;</span> + deviceInfo.<a name="a27"></a><a class="code" href="interface_i_device_info.html#aaa3e2819fc4456f2bf57e9251b5ff5dc">ManufacturerName</a> + <span class="stringliteral">&quot; &quot;</span> + deviceInfo.<a name="a28"></a><a class="code" href="interface_i_device_info.html#ae9364d38f3799346d68f92c40e1325ba">ModelName</a> + <span class="stringliteral">&quot; (&quot;</span> + deviceInfo.<a class="code" href="interface_i_device_info.html#a4787b4e3851b71705ae3f1635dd986bd">SerialNumber</a> + <span class="stringliteral">&quot;)&quot;</span>);</div><div class="line">                }</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="comment">// ch:选择第一项 | en:Select the first item</span></div><div class="line">            <span class="keywordflow">if</span> (deviceInfoList.Count != 0)</div><div class="line">            {</div><div class="line">                cbDeviceList.SelectedIndex = 0;</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">private</span> <span class="keywordtype">void</span> bnOpen_Click(<span class="keywordtype">object</span> sender, EventArgs e)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">if</span> (deviceInfoList.Count == 0 || cbDeviceList.SelectedIndex == -1)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;No device, please select&quot;</span>, 0);</div><div class="line">                <span class="keywordflow">return</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="comment">// ch:获取选择的设备信息 | en:Get selected device information</span></div><div class="line">            <a class="code" href="interface_i_device_info.html">IDeviceInfo</a> deviceInfo = deviceInfoList[cbDeviceList.SelectedIndex];</div><div class="line"></div><div class="line">            <span class="keywordflow">try</span></div><div class="line">            {</div><div class="line">                <span class="comment">// ch:打开设备 | en:Open device</span></div><div class="line">                device = <a name="_a29"></a><a class="code" href="class_device_factory.html">DeviceFactory</a>.<a name="a30"></a><a class="code" href="class_device_factory.html#a19ad2c419b04a772be6cc852467b1b68">CreateDevice</a>(deviceInfo);</div><div class="line">            }</div><div class="line">            <span class="keywordflow">catch</span> (Exception ex)</div><div class="line">            {</div><div class="line">                MessageBox.Show(<span class="stringliteral">&quot;Create Device fail!&quot;</span> + ex.Message);</div><div class="line">                <span class="keywordflow">return</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="keywordtype">int</span> result = device.<a name="a31"></a><a class="code" href="interface_i_device.html#a3d7c509521042ad1ed2addced19d0304">Open</a>();</div><div class="line">            <span class="keywordflow">if</span> (result != <a class="code" href="class_mv_error.html">MvError</a>.<a name="a32"></a><a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a>)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;Open Device fail!&quot;</span>, result);</div><div class="line">                <span class="keywordflow">return</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="comment">//ch: 判断是否为gige设备 | en: Determine whether it is a GigE device</span></div><div class="line">            <span class="keywordflow">if</span> (device is <a name="_a33"></a><a class="code" href="interface_i_gig_e_device.html">IGigEDevice</a>)</div><div class="line">            {</div><div class="line">                <span class="comment">//ch: 转换为gigE设备 | en: Convert to Gige device</span></div><div class="line">                <a class="code" href="interface_i_gig_e_device.html">IGigEDevice</a> gigEDevice = device as <a class="code" href="interface_i_gig_e_device.html">IGigEDevice</a>;</div><div class="line"></div><div class="line">                <span class="comment">// ch:探测网络最佳包大小(只对GigE相机有效) | en:Detection network optimal package size(It only works for the GigE camera)</span></div><div class="line">                <span class="keywordtype">int</span> optionPacketSize;</div><div class="line">                result = gigEDevice.<a name="a34"></a><a class="code" href="interface_i_gig_e_device.html#a2209ee7f36652873f082b6235a595324">GetOptimalPacketSize</a>(out optionPacketSize);</div><div class="line">                <span class="keywordflow">if</span> (result != <a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a>)</div><div class="line">                {</div><div class="line">                    ShowErrorMsg(<span class="stringliteral">&quot;Warning: Get Packet Size failed!&quot;</span>, result);</div><div class="line">                }</div><div class="line">                <span class="keywordflow">else</span></div><div class="line">                {</div><div class="line">                    result = device.<a name="a35"></a><a class="code" href="interface_i_device.html#ac6c5038b94b5d23b5c85d824b69f13bf">Parameters</a>.<a name="a36"></a><a class="code" href="interface_i_parameters.html#ad0868d9048824c82a2676e193d97094b">SetIntValue</a>(<span class="stringliteral">&quot;GevSCPSPacketSize&quot;</span>, (<span class="keywordtype">long</span>)optionPacketSize);</div><div class="line">                    <span class="keywordflow">if</span> (result != <a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a>)</div><div class="line">                    {</div><div class="line">                        ShowErrorMsg(<span class="stringliteral">&quot;Warning: Set Packet Size failed!&quot;</span>, result);</div><div class="line">                    }</div><div class="line">                }</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="comment">// ch:设置采集连续模式 | en:Set Continues Aquisition Mode</span></div><div class="line">            device.<a class="code" href="interface_i_device.html#ac6c5038b94b5d23b5c85d824b69f13bf">Parameters</a>.<a name="a37"></a><a class="code" href="interface_i_parameters.html#a2defa6e1e2e1527d36e68965dc54a2cc">SetEnumValueByString</a>(<span class="stringliteral">&quot;AcquisitionMode&quot;</span>, <span class="stringliteral">&quot;Continuous&quot;</span>);</div><div class="line">            device.<a class="code" href="interface_i_device.html#ac6c5038b94b5d23b5c85d824b69f13bf">Parameters</a>.<a class="code" href="interface_i_parameters.html#a2defa6e1e2e1527d36e68965dc54a2cc">SetEnumValueByString</a>(<span class="stringliteral">&quot;TriggerMode&quot;</span>, <span class="stringliteral">&quot;Off&quot;</span>);</div><div class="line"></div><div class="line">            isOpen = <span class="keyword">true</span>;</div><div class="line">            EnableControls(<span class="keyword">true</span>);</div><div class="line">            bnGetParameter_Click(<span class="keyword">null</span>, <span class="keyword">null</span>);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">private</span> <span class="keywordtype">void</span> EnableControls(<span class="keywordtype">bool</span> bIsCameraReady)</div><div class="line">        {</div><div class="line">            bnOpen.Enabled = (isOpen ? false : (bIsCameraReady ? true : <span class="keyword">false</span>));</div><div class="line">            bnClose.Enabled = ((isOpen &amp;&amp; bIsCameraReady) ? <span class="keyword">true</span> : <span class="keyword">false</span>);</div><div class="line">            bnStartGrab.Enabled = ((isGrabbing &amp;&amp; bIsCameraReady) ? <span class="keyword">false</span> : (isOpen ? <span class="keyword">true</span> : <span class="keyword">false</span>));</div><div class="line">            bnStopGrab.Enabled = (isGrabbing ? true : <span class="keyword">false</span>);</div><div class="line">            cbPixelFormat.Enabled = ((isGrabbing &amp;&amp; bIsCameraReady) ? <span class="keyword">false</span> : (isOpen ? <span class="keyword">true</span> : <span class="keyword">false</span>));</div><div class="line">            cbDisplaySource.Enabled = (isOpen ? true : <span class="keyword">false</span>);</div><div class="line">            cbLegendCheck.Enabled = (isOpen ? true : <span class="keyword">false</span>);</div><div class="line">            cbRegionSelect.Enabled = (isOpen ? true : <span class="keyword">false</span>);</div><div class="line">            bnRegionSetting.Enabled = (isOpen ? true : <span class="keyword">false</span>);</div><div class="line">            bnWarningSetting.Enabled = (isOpen ? true : <span class="keyword">false</span>);</div><div class="line">            teTransmissivity.Enabled = (isOpen ? true : <span class="keyword">false</span>);</div><div class="line">            teTargetDistance.Enabled = (isOpen ? true : <span class="keyword">false</span>);</div><div class="line">            teEmissivity.Enabled = (isOpen ? true : <span class="keyword">false</span>);</div><div class="line">            cbMeasureRange.Enabled = (isOpen ? true : <span class="keyword">false</span>);</div><div class="line">            bnGetParameter.Enabled = (isOpen ? true : <span class="keyword">false</span>);</div><div class="line">            bnSetParameter.Enabled = (isOpen ? true : <span class="keyword">false</span>);</div><div class="line">            cbPaletteMode.Enabled = (isOpen ? true : <span class="keyword">false</span>);</div><div class="line">            cbExportModeCheck.Enabled = (isOpen ? true : <span class="keyword">false</span>);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">private</span> <span class="keywordtype">int</span> ReadEnumIntoCombo(<span class="keywordtype">string</span> strKey, ref ComboBox ctrlComboBox)</div><div class="line">        {</div><div class="line">            <a name="_a38"></a><a class="code" href="interface_i_enum_value.html">IEnumValue</a> enumValue;</div><div class="line">            <span class="keywordtype">int</span> result = device.<a class="code" href="interface_i_device.html#ac6c5038b94b5d23b5c85d824b69f13bf">Parameters</a>.<a name="a39"></a><a class="code" href="interface_i_parameters.html#ac9530fd42852ae1eb5215e71f519495e">GetEnumValue</a>(strKey, out enumValue);</div><div class="line">            <span class="keywordflow">if</span> (<a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a> != result)</div><div class="line">            {</div><div class="line">                <span class="keywordflow">return</span> result;</div><div class="line">            }</div><div class="line">            ctrlComboBox.Items.Clear();</div><div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; enumValue.SupportedNum; ++i)</div><div class="line">            {</div><div class="line">                ctrlComboBox.Items.Add(enumValue.SupportEnumEntries[i].Symbolic);</div><div class="line">                <span class="keywordflow">if</span> (enumValue.CurEnumEntry.Value == enumValue.SupportEnumEntries[i].Value)</div><div class="line">                {</div><div class="line">                    ctrlComboBox.SelectedIndex = i;</div><div class="line">                }</div><div class="line">            }</div><div class="line">            <span class="keywordflow">return</span> <a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a>;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">private</span> <span class="keywordtype">void</span> bnGetParameter_Click(<span class="keywordtype">object</span> sender, EventArgs e)</div><div class="line">        {</div><div class="line">            <span class="keywordtype">int</span> result = ReadEnumIntoCombo(<span class="stringliteral">&quot;PixelFormat&quot;</span>, ref cbPixelFormat);</div><div class="line">            <span class="keywordflow">if</span> (<a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a> != result)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;Get PixelFormat Fail!&quot;</span>, result);</div><div class="line">                <span class="keywordflow">return</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">            result = ReadEnumIntoCombo(<span class="stringliteral">&quot;OverScreenDisplayProcessor&quot;</span>, ref cbDisplaySource);</div><div class="line">            <span class="keywordflow">if</span> (<a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a> != result)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;Get OverScreenDisplayProcessor Fail!&quot;</span>, result);</div><div class="line">                <span class="keywordflow">return</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">            result = ReadEnumIntoCombo(<span class="stringliteral">&quot;PalettesMode&quot;</span>, ref cbPaletteMode);</div><div class="line">            <span class="keywordflow">if</span> (<a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a> != result)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;Get PalettesMode Fail!&quot;</span>, result);</div><div class="line">                <span class="keywordflow">return</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="keywordtype">bool</span> boolValue = <span class="keyword">false</span>;</div><div class="line">            result = device.<a class="code" href="interface_i_device.html#ac6c5038b94b5d23b5c85d824b69f13bf">Parameters</a>.<a name="a40"></a><a class="code" href="interface_i_parameters.html#a079acb7a4d7c75a8b066e8e5ca1f2b3c">GetBoolValue</a>(<span class="stringliteral">&quot;LegendDisplayEnable&quot;</span>, out boolValue);</div><div class="line">            <span class="keywordflow">if</span> (<a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a> != result)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;Get LegendDisplayEnable Fail!&quot;</span>, result);</div><div class="line">                <span class="keywordflow">return</span>;</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                cbLegendCheck.Checked = boolValue;</div><div class="line">            }</div><div class="line"></div><div class="line">            result = device.<a class="code" href="interface_i_device.html#ac6c5038b94b5d23b5c85d824b69f13bf">Parameters</a>.<a class="code" href="interface_i_parameters.html#a079acb7a4d7c75a8b066e8e5ca1f2b3c">GetBoolValue</a>(<span class="stringliteral">&quot;MtExpertMode&quot;</span>, out boolValue);</div><div class="line">            <span class="keywordflow">if</span> (<a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a> != result)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;Get MtExpertMode Fail!&quot;</span>, result);</div><div class="line">                <span class="keywordflow">return</span>;</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                cbExportModeCheck.Checked = boolValue;</div><div class="line">            }</div><div class="line"></div><div class="line">            result = ReadEnumIntoCombo(<span class="stringliteral">&quot;TempRegionSelector&quot;</span>, ref cbRegionSelect);</div><div class="line">            <span class="keywordflow">if</span> (<a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a> != result)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;Get TempRegionSelector Fail!&quot;</span>, result);</div><div class="line">                <span class="keywordflow">return</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">            result = ReadEnumIntoCombo(<span class="stringliteral">&quot;TempMeasurementRange&quot;</span>, ref cbMeasureRange);</div><div class="line">            <span class="keywordflow">if</span> (<a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a> != result)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;Get TempMeasurementRange Fail!&quot;</span>, result);</div><div class="line">                <span class="keywordflow">return</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">            <a name="_a41"></a><a class="code" href="interface_i_int_value.html">IIntValue</a> intValue;</div><div class="line">            result = device.<a class="code" href="interface_i_device.html#ac6c5038b94b5d23b5c85d824b69f13bf">Parameters</a>.<a name="a42"></a><a class="code" href="interface_i_parameters.html#a48d03fbb2c39e14ec97696be3167b61b">GetIntValue</a>(<span class="stringliteral">&quot;AtmosphericTransmissivity&quot;</span>, out intValue);</div><div class="line">            <span class="keywordflow">if</span> (<a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a> != result)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;Get AtmosphericTransmissivity Fail!&quot;</span>, result);</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                teTransmissivity.Text = intValue.CurValue.ToString();</div><div class="line">            }</div><div class="line"></div><div class="line">            <a name="_a43"></a><a class="code" href="interface_i_float_value.html">IFloatValue</a> floatValue;</div><div class="line">            result = device.<a class="code" href="interface_i_device.html#ac6c5038b94b5d23b5c85d824b69f13bf">Parameters</a>.<a name="a44"></a><a class="code" href="interface_i_parameters.html#aa8a4ee320747732bd523a7d19c8b5127">GetFloatValue</a>(<span class="stringliteral">&quot;TargetDistance&quot;</span>, out floatValue);</div><div class="line">            <span class="keywordflow">if</span> (<a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a> != result)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;Get TargetDistance Fail!&quot;</span>, result);</div><div class="line">                <span class="keywordflow">return</span>;</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                teTargetDistance.Text = floatValue.CurValue.ToString();</div><div class="line">            }</div><div class="line"></div><div class="line">            result = device.<a class="code" href="interface_i_device.html#ac6c5038b94b5d23b5c85d824b69f13bf">Parameters</a>.<a class="code" href="interface_i_parameters.html#aa8a4ee320747732bd523a7d19c8b5127">GetFloatValue</a>(<span class="stringliteral">&quot;FullScreenEmissivity&quot;</span>, out floatValue);</div><div class="line">            <span class="keywordflow">if</span> (<a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a> != result)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;Get FullScreenEmissivity!&quot;</span>, result);</div><div class="line">                <span class="keywordflow">return</span>;</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                teEmissivity.Text = floatValue.CurValue.ToString();</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">private</span> <span class="keywordtype">void</span> ReceiveThreadProcess()</div><div class="line">        {</div><div class="line">            <a name="_a45"></a><a class="code" href="interface_i_frame_out.html">IFrameOut</a> frameOut;</div><div class="line">            <span class="keywordtype">int</span> result = <a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a>;</div><div class="line">            <span class="keyword">using</span> (StreamWriter writer = <span class="keyword">new</span> StreamWriter(<span class="stringliteral">&quot;InfraredLog.txt&quot;</span>))</div><div class="line">            {</div><div class="line">                <span class="keywordflow">while</span> (isGrabbing)</div><div class="line">                {</div><div class="line">                    <span class="comment">// ch:获取图像 | en:Get image</span></div><div class="line">                    result = device.<a name="a46"></a><a class="code" href="interface_i_device.html#a5491d0e3ad3479b873e0d7878386c4cb">StreamGrabber</a>.<a name="a47"></a><a class="code" href="interface_i_stream_grabber.html#ae5f233c30512db03bb4005f5ee867cd7">GetImageBuffer</a>(1000, out frameOut);</div><div class="line">                    <span class="keywordflow">if</span> (result == <a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a>)</div><div class="line">                    {</div><div class="line">                        <span class="comment">// ch:显示图像 | en:Display image</span></div><div class="line">                        device.<a name="a48"></a><a class="code" href="interface_i_device.html#a074d135c8ec2534fcaad977611f0d018">ImageRender</a>.<a name="a49"></a><a class="code" href="interface_i_image_render.html#a14f02c29e8e0be6b76520dafcbe41594">DisplayOneFrame</a>(displayHandle, frameOut.Image);</div><div class="line"></div><div class="line"></div><div class="line">                        <span class="comment">// 解析chunckdata数据</span></div><div class="line">                        IFR_OUTCOME_LIST stOutComeList = <span class="keyword">new</span> IFR_OUTCOME_LIST();</div><div class="line">                        IFR_ALARM_UPLOAD_INFO stAlarmInfoList = <span class="keyword">new</span> IFR_ALARM_UPLOAD_INFO();</div><div class="line">                        IFR_FULL_SCREEN_MAX_MIN_INFO stFullScreenMaxMin = <span class="keyword">new</span> IFR_FULL_SCREEN_MAX_MIN_INFO();</div><div class="line">                        IRF_OSD_INFO stOsdInfo = <span class="keyword">new</span> IRF_OSD_INFO();</div><div class="line"></div><div class="line">                        <span class="comment">// Chunk信息</span></div><div class="line">                        <a name="_a50"></a><a class="code" href="interface_i_chunk_info.html">IChunkInfo</a> chunkInfo = frameOut.ChunkInfo;</div><div class="line">                        <span class="keywordflow">foreach</span> (var item <span class="keywordflow">in</span> chunkInfo)</div><div class="line">                        {</div><div class="line">                            </div><div class="line">                            <span class="keywordflow">if</span> (TEMP_CHUNK_ID_TEST == item.ChunkID &amp;&amp;</div><div class="line">                                Marshal.SizeOf(stOutComeList) == item.Length)</div><div class="line">                            {</div><div class="line">                                stOutComeList = (IFR_OUTCOME_LIST)Marshal.PtrToStructure(item.DataPtr, typeof(IFR_OUTCOME_LIST));</div><div class="line">                            }</div><div class="line">                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TEMP_CHUNK_ID_ALARM == item.ChunkID &amp;&amp;</div><div class="line">                                    Marshal.SizeOf(stAlarmInfoList) == item.Length)</div><div class="line">                            {</div><div class="line">                                stAlarmInfoList = (IFR_ALARM_UPLOAD_INFO)Marshal.PtrToStructure(item.DataPtr, typeof(IFR_ALARM_UPLOAD_INFO));</div><div class="line">                            }</div><div class="line">                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TEMP_CHUNK_ID_MIN_MAX_TEMP == item.ChunkID &amp;&amp;</div><div class="line">                                    Marshal.SizeOf(stFullScreenMaxMin) == item.Length)</div><div class="line">                            {</div><div class="line">                                stFullScreenMaxMin = (IFR_FULL_SCREEN_MAX_MIN_INFO)Marshal.PtrToStructure(item.DataPtr, typeof(IFR_FULL_SCREEN_MAX_MIN_INFO));</div><div class="line">                            }</div><div class="line">                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TEMP_CHUNK_ID_OSD_INFO == item.ChunkID &amp;&amp;</div><div class="line">                                    Marshal.SizeOf(stOsdInfo) == item.Length)</div><div class="line">                            {</div><div class="line">                                stOsdInfo = (IRF_OSD_INFO)Marshal.PtrToStructure(item.DataPtr, typeof(IRF_OSD_INFO));</div><div class="line">                            }</div><div class="line">                        }</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">                        writer.WriteLine(<span class="stringliteral">&quot;************Beginning Output Test Temperature Info, Frame Number:{0}************&quot;</span>, frameOut.FrameNum);</div><div class="line"></div><div class="line">                        IRF_REGION_DISP_INFO stRegionDispRules = <span class="keyword">new</span> IRF_REGION_DISP_INFO();</div><div class="line">                        <span class="keywordtype">int</span> nRegionDispRulesSize = Marshal.SizeOf(stRegionDispRules);</div><div class="line"></div><div class="line">                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; TEMP_REGION_COUNT; ++i)</div><div class="line">                        {</div><div class="line">                            <span class="keywordflow">if</span> (stOsdInfo.regionDispRules == <span class="keyword">null</span>)</div><div class="line">                            {</div><div class="line">                                <span class="keywordflow">continue</span>;</div><div class="line">                            }</div><div class="line">                            stRegionDispRules = stOsdInfo.regionDispRules[i];</div><div class="line">                            <span class="comment">//stRegionDispRules = (IRF_REGION_DISP_INFO)Marshal.PtrToStructure(stOsdInfo.regionDispRules[i], typeof(IRF_REGION_DISP_INFO));</span></div><div class="line">                            <span class="keywordflow">if</span> (stRegionDispRules.regionDispEnable.Equals(0))</div><div class="line">                            {</div><div class="line">                                <span class="keywordflow">continue</span>;</div><div class="line">                            }</div><div class="line">                            <span class="keywordflow">if</span> (stAlarmInfoList.alarmOutcome == <span class="keyword">null</span>)</div><div class="line">                            {</div><div class="line">                                <span class="keywordflow">continue</span>;</div><div class="line">                            }</div><div class="line">                            <span class="comment">//deal with the alarm region.</span></div><div class="line">                            IFR_ALARM_INFO stAlarmInfo = stAlarmInfoList.alarmOutcome[i];</div><div class="line">                            <span class="keywordflow">if</span> (stAlarmInfo.alarmkey &gt; 0 &amp;&amp; TEMP_ALARM_LEVER_WARN == stAlarmInfo.alarmLevel &amp;&amp;</div><div class="line">                                (<span class="keyword">false</span> == stRegionDispRules.regionAlarmDispEnable.Equals(0)))</div><div class="line">                            {</div><div class="line">                                IFR_POINT stPoint0 = stAlarmInfo.points[0];</div><div class="line">                                IFR_POINT stPoint1 = stAlarmInfo.points[1];</div><div class="line"></div><div class="line">                                <span class="keywordflow">if</span> (TEMP_ALARM_TYPE_MAX == stAlarmInfo.alarmType)</div><div class="line">                                {</div><div class="line"></div><div class="line">                                    writer.WriteLine(<span class="stringliteral">&quot;RegionID: {0}; Alarm Max Temp : {1}; PointX : {2}; PointY : {3}&quot;</span>,</div><div class="line">                                    stAlarmInfo.regionId, 0.1 * stAlarmInfo.measureTmpData, stPoint0.x, stPoint0.y);</div><div class="line"></div><div class="line">                                }</div><div class="line">                                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TEMP_ALARM_TYPE_MIN == stAlarmInfo.alarmType)</div><div class="line">                                {</div><div class="line"></div><div class="line">                                    writer.WriteLine(<span class="stringliteral">&quot;RegionID: {0}; Alarm Min Temp : {1}; PointX : {2}; PointY :{3}&quot;</span>,</div><div class="line">                                    stAlarmInfo.regionId, 0.1 * stAlarmInfo.measureTmpData, stPoint1.x, stPoint1.y);</div><div class="line">                                }</div><div class="line">                                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TEMP_ALARM_TYPE_AVG == stAlarmInfo.alarmType)</div><div class="line">                                {</div><div class="line"></div><div class="line">                                    writer.WriteLine(<span class="stringliteral">&quot;RegionID: {0}; Alarm Avg Temp : {1}; PointX :{2}; PointY : {3}&quot;</span>,</div><div class="line">                                    stAlarmInfo.regionId, 0.1 * stAlarmInfo.measureTmpData, stPoint0.x, stPoint0.y);</div><div class="line">                                }</div><div class="line">                                <span class="keywordflow">else</span></div><div class="line">                                {</div><div class="line">                                    writer.WriteLine(<span class="stringliteral">&quot;RegionID: {0}; Alarm Differ Temp : {1}; PointX : {2}; PointY : {3}&quot;</span>,</div><div class="line">                                    stAlarmInfo.regionId, 0.1 * stAlarmInfo.measureTmpData, stPoint0.x, stPoint0.y);</div><div class="line">                                }</div><div class="line"></div><div class="line">                                <span class="keywordflow">continue</span>;</div><div class="line">                            }</div><div class="line"></div><div class="line">                            <span class="comment">//deal with the enable region. </span></div><div class="line">                            IFR_OUTCOME_INFO stOutCome = stOutComeList.ifrOutcome[i];</div><div class="line">                            <span class="keywordflow">if</span> (stOutCome.enable.Equals(0))</div><div class="line">                            {</div><div class="line">                                <span class="keywordflow">continue</span>;</div><div class="line">                            }</div><div class="line"></div><div class="line">                            IFR_POINT stOutComePoint0 = stOutCome.points[0];</div><div class="line">                            IFR_POINT stOutComePoint1 = stOutCome.points[1];</div><div class="line"></div><div class="line">                            <span class="keywordflow">if</span> (TEMP_ROI_TYPE_POINT == stOutCome.regiontype)</div><div class="line">                            {</div><div class="line">                                <span class="keywordflow">if</span> (<span class="keyword">false</span> == stRegionDispRules.regionAvgTempDispEnable.Equals(0))</div><div class="line">                                {</div><div class="line">                                    writer.WriteLine(<span class="stringliteral">&quot;RegionID: {0}; Avg Temp : {1}; PointX : {2}; PointY :{3}&quot;</span>,</div><div class="line">                                    stOutCome.regionId, 0.1 * stOutCome.avrTmp, stOutComePoint0.x, stOutComePoint0.y);</div><div class="line">                                }</div><div class="line">                            }</div><div class="line">                            <span class="keywordflow">else</span></div><div class="line">                            {</div><div class="line">                                <span class="comment">//均值显示在最大值的后面</span></div><div class="line">                                <span class="comment">//均值显示在最大值的后面</span></div><div class="line">                                <span class="keywordflow">if</span> (<span class="keyword">false</span> == stRegionDispRules.regionAvgTempDispEnable.Equals(0))</div><div class="line">                                {</div><div class="line">                                    writer.WriteLine(<span class="stringliteral">&quot;RegionID: {0}; Avg Temp :{1}; PointX :  {2}; PointY :{3}&quot;</span>,</div><div class="line">                                    stOutCome.regionId, 0.1 * stOutCome.avrTmp, stOutComePoint0.x, stOutComePoint0.y);</div><div class="line"></div><div class="line">                                }</div><div class="line"></div><div class="line">                                <span class="keywordflow">if</span> (<span class="keyword">false</span> == stRegionDispRules.regionMaxTempDispEnable.Equals(0))</div><div class="line">                                {</div><div class="line">                                    writer.WriteLine(<span class="stringliteral">&quot;RegionID: {0}; Max Temp : {1}; PointX : {2}; PointY : {3}&quot;</span>,</div><div class="line">                                    stOutCome.regionId, 0.1 * stOutCome.maxTmp, stOutComePoint0.x, stOutComePoint0.y);</div><div class="line">                                }</div><div class="line"></div><div class="line">                                <span class="keywordflow">if</span> (<span class="keyword">false</span> == stRegionDispRules.regionMinTempDispEnable.Equals(0))</div><div class="line">                                {</div><div class="line">                                    writer.WriteLine(<span class="stringliteral">&quot;RegionID: {0}; Min Temp : {1}; PointX : {2}; PointY : {3}&quot;</span>,</div><div class="line">                                    stOutCome.regionId, 0.1 * stOutCome.minTmp, stOutComePoint1.x, stOutComePoint1.y);</div><div class="line">                                }</div><div class="line">                            }</div><div class="line">                        }</div><div class="line"></div><div class="line"></div><div class="line">                        <span class="comment">// ch:释放图像 | en:Free image</span></div><div class="line">                        device.<a class="code" href="interface_i_device.html#a5491d0e3ad3479b873e0d7878386c4cb">StreamGrabber</a>.<a name="a51"></a><a class="code" href="interface_i_stream_grabber.html#a502f88a8d1cdca602ebe6431ffcf9cea">FreeImageBuffer</a>(frameOut);</div><div class="line">                    }</div><div class="line">                }</div><div class="line">            }</div><div class="line">            </div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">private</span> <span class="keywordtype">void</span> bnStartGrab_Click(<span class="keywordtype">object</span> sender, EventArgs e)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">if</span> (<span class="keyword">false</span> == isOpen || <span class="keyword">true</span> == isGrabbing || <span class="keyword">null</span> == device)</div><div class="line">            {</div><div class="line">                <span class="keywordflow">return</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="comment">// ch:标志位置true | en:Set position bit true</span></div><div class="line">            isGrabbing = <span class="keyword">true</span>;</div><div class="line"></div><div class="line">            m_hReceiveThread =  <span class="keyword">new</span> Thread(ReceiveThreadProcess);</div><div class="line">            m_hReceiveThread.Start();</div><div class="line"></div><div class="line">            <span class="comment">// ch:开始采集 | en:Start Grabbing</span></div><div class="line">            <span class="keywordtype">int</span> result = device.<a class="code" href="interface_i_device.html#a5491d0e3ad3479b873e0d7878386c4cb">StreamGrabber</a>.<a name="a52"></a><a class="code" href="interface_i_stream_grabber.html#a3a77e754ee97eea5dc9b453aa2294cb1">StartGrabbing</a>();</div><div class="line">            <span class="keywordflow">if</span> (<a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a> != result)</div><div class="line">            {</div><div class="line">                isGrabbing = <span class="keyword">false</span>;</div><div class="line">                m_hReceiveThread.Join();</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;Start Grabbing Fail!&quot;</span>, result);</div><div class="line">                <span class="keywordflow">return</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">            isGrabbing = <span class="keyword">true</span>;</div><div class="line">            EnableControls(<span class="keyword">true</span>);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">private</span> <span class="keywordtype">void</span> bnClose_Click(<span class="keywordtype">object</span> sender, EventArgs e)</div><div class="line">        {</div><div class="line">            <span class="comment">// ch:取流标志位清零 | en:Reset flow flag bit</span></div><div class="line">            <span class="keywordflow">if</span> (isGrabbing == <span class="keyword">true</span>)</div><div class="line">            {</div><div class="line">                isGrabbing = <span class="keyword">false</span>;</div><div class="line">                m_hReceiveThread.Join();</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="comment">// ch:关闭设备 | en:Close Device</span></div><div class="line">            <span class="keywordflow">if</span> (device != <span class="keyword">null</span>)</div><div class="line">            {</div><div class="line">                device.<a name="a53"></a><a class="code" href="interface_i_device.html#adb72189b679fc15d5055763918547999">Close</a>();</div><div class="line">                device.Dispose();</div><div class="line">            }</div><div class="line"></div><div class="line">            isGrabbing = <span class="keyword">false</span>;</div><div class="line">            isOpen = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">            <span class="comment">// ch:控件操作 | en:Control Operation</span></div><div class="line">            EnableControls(<span class="keyword">true</span>);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">private</span> <span class="keywordtype">void</span> bnStopGrab_Click(<span class="keywordtype">object</span> sender, EventArgs e)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">if</span> (<span class="keyword">false</span> == isOpen || <span class="keyword">false</span> == isGrabbing || <span class="keyword">null</span> == device)</div><div class="line">            {</div><div class="line">                <span class="keywordflow">return</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="comment">// ch:标志位设为false | en:Set flag bit false</span></div><div class="line">            isGrabbing = <span class="keyword">false</span>;</div><div class="line">            m_hReceiveThread.Join();</div><div class="line"></div><div class="line">            <span class="comment">// ch:停止采集 | en:Stop Grabbing</span></div><div class="line">            <span class="keywordtype">int</span> result = device.<a class="code" href="interface_i_device.html#a5491d0e3ad3479b873e0d7878386c4cb">StreamGrabber</a>.<a name="a54"></a><a class="code" href="interface_i_stream_grabber.html#a721412beb921ad084d72c24c5763f5a5">StopGrabbing</a>();</div><div class="line">            <span class="keywordflow">if</span> (result != <a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a>)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;Stop Grabbing Fail!&quot;</span>, result);</div><div class="line">            }</div><div class="line"></div><div class="line">            isGrabbing = <span class="keyword">false</span>;</div><div class="line">            <span class="comment">// ch:控件操作 | en:Control Operation</span></div><div class="line">            EnableControls(<span class="keyword">true</span>);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">private</span> <span class="keywordtype">void</span> cbPixelFormat_SelectedIndexChanged(<span class="keywordtype">object</span> sender, EventArgs e)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">if</span> (<span class="keyword">false</span> == isGrabbing)</div><div class="line">            {</div><div class="line">                <span class="keywordtype">int</span> result = device.<a class="code" href="interface_i_device.html#ac6c5038b94b5d23b5c85d824b69f13bf">Parameters</a>.<a class="code" href="interface_i_parameters.html#a2defa6e1e2e1527d36e68965dc54a2cc">SetEnumValueByString</a>(<span class="stringliteral">&quot;PixelFormat&quot;</span>, cbPixelFormat.SelectedItem.ToString());</div><div class="line">                <span class="keywordflow">if</span> (result != <a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a>)</div><div class="line">                {</div><div class="line">                    ShowErrorMsg(<span class="stringliteral">&quot;Set PixelFormat Fail!&quot;</span>, result);</div><div class="line">                }</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">private</span> <span class="keywordtype">void</span> cbDisplaySource_SelectedIndexChanged(<span class="keywordtype">object</span> sender, EventArgs e)</div><div class="line">        {</div><div class="line">            <span class="keywordtype">int</span> result = device.<a class="code" href="interface_i_device.html#ac6c5038b94b5d23b5c85d824b69f13bf">Parameters</a>.<a class="code" href="interface_i_parameters.html#a2defa6e1e2e1527d36e68965dc54a2cc">SetEnumValueByString</a>(<span class="stringliteral">&quot;OverScreenDisplayProcessor&quot;</span>, cbDisplaySource.SelectedItem.ToString());</div><div class="line">            <span class="keywordflow">if</span> (result != <a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a>)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;Set OverScreenDisplayProcessor Fail!&quot;</span>, result);</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">private</span> <span class="keywordtype">void</span> cbPaletteMode_SelectedIndexChanged(<span class="keywordtype">object</span> sender, EventArgs e)</div><div class="line">        {</div><div class="line">            <span class="keywordtype">int</span> result = device.<a class="code" href="interface_i_device.html#ac6c5038b94b5d23b5c85d824b69f13bf">Parameters</a>.<a class="code" href="interface_i_parameters.html#a2defa6e1e2e1527d36e68965dc54a2cc">SetEnumValueByString</a>(<span class="stringliteral">&quot;PalettesMode&quot;</span>, cbPaletteMode.SelectedItem.ToString());</div><div class="line">            <span class="keywordflow">if</span> (result != <a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a>)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;Set PalettesMode Fail!&quot;</span>, result);</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">private</span> <span class="keywordtype">void</span> cbLegendCheck_CheckedChanged(<span class="keywordtype">object</span> sender, EventArgs e)</div><div class="line">        {</div><div class="line">            <span class="keywordtype">bool</span> bLegendCheck = cbLegendCheck.Checked;</div><div class="line"></div><div class="line">            <span class="keywordtype">int</span> result = device.<a class="code" href="interface_i_device.html#ac6c5038b94b5d23b5c85d824b69f13bf">Parameters</a>.<a name="a55"></a><a class="code" href="interface_i_parameters.html#a43674a1eaf2723ff3489a61e8254d48e">SetBoolValue</a>(<span class="stringliteral">&quot;LegendDisplayEnable&quot;</span>, bLegendCheck);</div><div class="line">            <span class="keywordflow">if</span> (result != <a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a>)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;Set LegendDisplayEnable Fail!&quot;</span>, result);</div><div class="line">                <span class="keywordflow">return</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">            result = device.<a class="code" href="interface_i_device.html#ac6c5038b94b5d23b5c85d824b69f13bf">Parameters</a>.<a name="a56"></a><a class="code" href="interface_i_parameters.html#a9c2bb88e8e7080a4fb5997a879514358">SetCommandValue</a>(<span class="stringliteral">&quot;TempControlLoad&quot;</span>);</div><div class="line">            <span class="keywordflow">if</span> (result != <a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a>)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;Exec TempControlLoad Fail!&quot;</span>, result);</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">private</span> <span class="keywordtype">void</span> cbExportModeCheck_CheckedChanged(<span class="keywordtype">object</span> sender, EventArgs e)</div><div class="line">        {</div><div class="line">            <span class="keywordtype">bool</span> bExportModeCheck = cbExportModeCheck.Checked;</div><div class="line"></div><div class="line">            <span class="keywordtype">int</span> result = device.<a class="code" href="interface_i_device.html#ac6c5038b94b5d23b5c85d824b69f13bf">Parameters</a>.<a class="code" href="interface_i_parameters.html#a43674a1eaf2723ff3489a61e8254d48e">SetBoolValue</a>(<span class="stringliteral">&quot;MtExpertMode&quot;</span>, bExportModeCheck);</div><div class="line">            <span class="keywordflow">if</span> (result != <a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a>)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;Set ExpertMode Fail!&quot;</span>, result);</div><div class="line">                <span class="keywordflow">return</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">            result = device.<a class="code" href="interface_i_device.html#ac6c5038b94b5d23b5c85d824b69f13bf">Parameters</a>.<a class="code" href="interface_i_parameters.html#a9c2bb88e8e7080a4fb5997a879514358">SetCommandValue</a>(<span class="stringliteral">&quot;TempControlLoad&quot;</span>);</div><div class="line">            <span class="keywordflow">if</span> (result != <a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a>)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;Exec TempControlLoad Fail!&quot;</span>, result);</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">private</span> <span class="keywordtype">void</span> cbRegionSelect_SelectedIndexChanged(<span class="keywordtype">object</span> sender, EventArgs e)</div><div class="line">        {</div><div class="line">            <span class="keywordtype">int</span> result = device.<a class="code" href="interface_i_device.html#ac6c5038b94b5d23b5c85d824b69f13bf">Parameters</a>.<a class="code" href="interface_i_parameters.html#a2defa6e1e2e1527d36e68965dc54a2cc">SetEnumValueByString</a>(<span class="stringliteral">&quot;TempRegionSelector&quot;</span>, cbRegionSelect.SelectedItem.ToString());</div><div class="line">            <span class="keywordflow">if</span> (result != <a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a>)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;Set TempRegionSelector Fail!&quot;</span>, result);</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">private</span> <span class="keywordtype">void</span> cbMeasureRange_SelectedIndexChanged(<span class="keywordtype">object</span> sender, EventArgs e)</div><div class="line">        {</div><div class="line">            <span class="keywordtype">int</span> result = device.<a class="code" href="interface_i_device.html#ac6c5038b94b5d23b5c85d824b69f13bf">Parameters</a>.<a class="code" href="interface_i_parameters.html#a2defa6e1e2e1527d36e68965dc54a2cc">SetEnumValueByString</a>(<span class="stringliteral">&quot;TempMeasurementRange&quot;</span>, cbMeasureRange.SelectedItem.ToString());</div><div class="line">            <span class="keywordflow">if</span> (result != <a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a>)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;Set TempMeasurementRange Fail!&quot;</span>, result);</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">private</span> <span class="keywordtype">void</span> bnSetParameter_Click(<span class="keywordtype">object</span> sender, EventArgs e)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">try</span></div><div class="line">            {</div><div class="line">                <span class="keywordtype">int</span>.Parse(teTransmissivity.Text);</div><div class="line">                <span class="keywordtype">float</span>.Parse(teTargetDistance.Text);</div><div class="line">                <span class="keywordtype">float</span>.Parse(teEmissivity.Text);</div><div class="line">            }</div><div class="line">            <span class="keywordflow">catch</span></div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;Please enter correct type!&quot;</span>, 0);</div><div class="line">                <span class="keywordflow">return</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="keywordtype">int</span> result = device.<a class="code" href="interface_i_device.html#ac6c5038b94b5d23b5c85d824b69f13bf">Parameters</a>.<a class="code" href="interface_i_parameters.html#ad0868d9048824c82a2676e193d97094b">SetIntValue</a>(<span class="stringliteral">&quot;AtmosphericTransmissivity&quot;</span>, <span class="keywordtype">long</span>.Parse(teTransmissivity.Text));</div><div class="line">            <span class="keywordflow">if</span> (result != <a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a>)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;Set AtmosphericTransmissivity Fail!&quot;</span>, result);</div><div class="line">            }</div><div class="line"></div><div class="line">            result = device.<a class="code" href="interface_i_device.html#ac6c5038b94b5d23b5c85d824b69f13bf">Parameters</a>.<a name="a57"></a><a class="code" href="interface_i_parameters.html#a365c7f2b58cf6bab322966ea97355531">SetFloatValue</a>(<span class="stringliteral">&quot;TargetDistance&quot;</span>, <span class="keywordtype">float</span>.Parse(teTargetDistance.Text));</div><div class="line">            <span class="keywordflow">if</span> (result != <a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a>)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;Set TargetDistance Fail!&quot;</span>, result);</div><div class="line">            }</div><div class="line"></div><div class="line">            result = device.<a class="code" href="interface_i_device.html#ac6c5038b94b5d23b5c85d824b69f13bf">Parameters</a>.<a class="code" href="interface_i_parameters.html#a365c7f2b58cf6bab322966ea97355531">SetFloatValue</a>(<span class="stringliteral">&quot;FullScreenEmissivity&quot;</span>, <span class="keywordtype">float</span>.Parse(teEmissivity.Text) + 0.000001F);</div><div class="line">            <span class="keywordflow">if</span> (result != <a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a>)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;Set FullScreenEmissivity Fail!&quot;</span>, result);</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">private</span> <span class="keywordtype">void</span> bnRegionSetting_Click(<span class="keywordtype">object</span> sender, EventArgs e)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">if</span> (cbRegionSelect.SelectedIndex &lt; 0)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;No Region is selected&quot;</span>, <a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a>);</div><div class="line">                <span class="keywordflow">return</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="keywordtype">bool</span> bExportModeCheck = cbExportModeCheck.Checked;</div><div class="line">            <a class="code" href="namespace_infrared_demo.html">InfraredDemo</a>.RegionSettingForm = <span class="keyword">new</span> FormRegionSetting(ref device, ref cbRegionSelect, ref bExportModeCheck);</div><div class="line"></div><div class="line">            <a class="code" href="namespace_infrared_demo.html">InfraredDemo</a>.RegionSettingForm.Show();</div><div class="line">            RegionSettingForm.Show();</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">private</span> <span class="keywordtype">void</span> bnWarningSetting_Click(<span class="keywordtype">object</span> sender, EventArgs e)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">if</span> (cbRegionSelect.SelectedIndex &lt; 0)</div><div class="line">            {</div><div class="line">                ShowErrorMsg(<span class="stringliteral">&quot;No Region is selected&quot;</span>, <a class="code" href="class_mv_error.html">MvError</a>.<a class="code" href="class_mv_error.html#aae781ef0f6a59940c564cc5bcaac1792">MV_OK</a>);</div><div class="line">                <span class="keywordflow">return</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">            <a class="code" href="namespace_infrared_demo.html">InfraredDemo</a>.AlarmSettingForm = <span class="keyword">new</span> FormAlarmSetting(ref device, ref cbRegionSelect);</div><div class="line">            <a class="code" href="namespace_infrared_demo.html">InfraredDemo</a>.AlarmSettingForm.Show();</div><div class="line">            AlarmSettingForm.Show();</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">private</span> <span class="keywordtype">void</span> InfraredDemo_Closing(<span class="keywordtype">object</span> sender, FormClosingEventArgs e)</div><div class="line">        {</div><div class="line">            bnClose_Click(sender, <span class="keyword">null</span>);</div><div class="line"></div><div class="line">            <span class="comment">// ch: 反初始化SDK | en: Finalize SDK</span></div><div class="line">            <a class="code" href="class_s_d_k_system.html">SDKSystem</a>.<a name="a58"></a><a class="code" href="class_s_d_k_system.html#aa54962a71ad911c8fb67f7d395049e19">Finalize</a>();</div><div class="line">        }</div><div class="line"> </div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<div class="footer" style="text-align: right;">
	<hr/>
	<small></small>
</div>
</body>
</html>