<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="custom-style.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
	<div style="overflow: hidden;">
		<div style="height: 57px;min-width: 1039px;background-size: auto 100%;background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABwgAAAABCAYAAADKO/rAAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAABRSURBVFhH7dUxCoBADEXB5LK5/w1iIaLIrsgWNs50Sf/4WVUd8HOZGd1nCqMbGNMPrNMPrJv1cvz0A3OjfuwPvDPrxf7A7t7IlX7gmX74VsQGguw4S6+UnSYAAAAASUVORK5CYII=');">
			<img src="titleleft.png" style="float: left;"/>
			<img src="titleright.png" alt="" style="float: right;" />
		</div>
	</div>
<!-- 制作者 Doxygen 1.8.15 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>首页</span></a></li>
      <li><a href="_xE5_x8F_x91_xE7_x89_x88_xE8_xAF_xB4_xE6_x98_x8E.html"><span>发版说明</span></a></li>
      <li><a href="_xE7_x8E_xAF_xE5_xA2_x83_xE9_x85_x8D_xE7_xBD_xAE.html"><span>环境配置</span></a></li>
      <li><a href="_xE7_xBC_x96_xE7_xA8_x8B_xE5_xBC_x95_xE5_xAF_xBC.html"><span>编程引导</span></a></li>
      <li><a href="modules.html"><span>API参考</span></a></li>
      <li><a href="_xE7_x9B_xB8_xE6_x9C_xBA_xE5_x8F_x82_xE6_x95_xB0_xE8_x8A_x82_xE7_x82_xB9_xE8_xA1_xA8.html"><span>相机参数节点表</span></a></li>
      <li><a href="_xE7_xA4_xBA_xE4_xBE_x8B_xE7_xA8_x8B_xE5_xBA_x8F_xE6_xA6_x82_xE8_xA7_x88.html"><span>示例程序概览</span></a></li>
      <li><a href="_xE5_xB8_xB8_xE8_xA7_x81_xE9_x97_xAE_xE9_xA2_x98.html"><span>常见问题</span></a></li>
      <li><a href="_xE6_xB3_x95_xE5_xBE_x8B_xE5_xA3_xB0_xE6_x98_x8E.html"><span>法律声明</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="PageDoc"><div class="contents">
<div class="textblock"><div class="header" style="margin-left:-12px;margin-top:-10px;margin-right:-8px;"> <div class="headertitle"> <div class="title">设置参数</div> </div> </div><div id="shortdesc"> <br />
 </div><div id="shortdesc">SDK通过GenICam标准协议实现读取和设置设备参数，并提供了一套相机和采集卡均通用的参数配置接口。通过接口，您可获取和配置包括整型、枚举型、浮点型、布尔型、字符串型和命令型总共6种类型的参数节点。</div><div id="shortdesc"> <br />
 </div><div id="shortdesc">本节内容包含： <ul>
<li>
<a href="#CheckNode">查询节点名称和类型</a> </li>
<li>
<a href="#GetNode">获取和设置节点</a> </li>
<li>
<a href="#GIGE">GigE相机专有配置</a> </li>
<li>
<a href="#U3V">U3V相机专有配置</a> </li>
<li>
<a href="#SERIAL">串口设备专有配置</a> </li>
</ul>
</div><div id="content"> <div id="CheckNode"> <div class="mainparams"> <h2>查询节点名称和类型</h2>
</div></div></div><div id="content"><div id="CheckNode"><div class="mainparams"> </div> <div class="subparamswhite"> </div></div></div><div id="content"><div id="CheckNode"><div class="subparamswhite">调用用于<a href="#GetNode">获取和设置节点</a>的接口时，您需传入节点名称和节点类型。</div></div></div><div id="content"><div id="CheckNode"><div class="subparamswhite"> </div></div></div><div id="content"><div id="CheckNode"><div class="subparamswhite">您可通过客户端查询节点的名称和类型。</div></div></div><div id="content"><div id="CheckNode"><div class="subparamswhite"></div></div></div><div id="content"><div id="CheckNode"><div class="subparamswhite"> <ol>
<li>
<p class="startli"></p>
<p class="interli">通过客户端连接设备。</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"></p>
<p class="interli">在客户端属性树上选中某个属性的参数，即可在属性下方查看该参数的节点信息。</p>
<dl class="section note"><dt>注解</dt><dd>若您使用的客户端版本高于等于4.4.0，您还可以查看节点的调用示例。</dd></dl>
<p class="interli">下图以Width参数为例。</p>
<img src="bi_img_Prog06_width.png" class="img_main" height="600" alt="查看width参数的节点信息" class="inline"/>
  </li>
</ol>
<dl class="section note"><dt>注解</dt><dd>更多操作详情，请参见客户端用户手册。</dd></dl>
</div> </div></div><div id="content"> <div id="GetNode"> <div class="mainparams"> <h2>获取和配置节点</h2>
</div></div></div><div id="content"><div id="GetNode"><div class="mainparams"> </div> <div class="subparamswhite"> </div></div></div><div id="content"><div id="GetNode"><div class="subparamswhite">您可参照本节的示例代码，在您的程序中获取和配置节点值。</div></div></div><div id="content"><div id="GetNode"><div class="subparamswhite"> </div></div></div><div id="content"><div id="GetNode"><div class="subparamswhite">您可配置总共6种类型的参数节点，包括：<a href="#int">整型</a>、<a href="#enum">枚举型</a>、<a href="#float">浮点型</a>、<a href="#bool">布尔型</a>、<a href="#string">字符串型</a>和<a href="#userset">命令型</a>。</div></div></div><div id="content"><div id="GetNode"><div class="subparamswhite"> <ul>
<li id="int">
<p class="startli"></p>
<p class="interli"><b>整型节点</b>：</p>
<ul>
<li>
调用 <a class="el" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga6240aac97e206f77b4ce3bd7a1ef1048" title="获取Integer属性值">MV_CC_GetIntValueEx()</a> 获取整型节点。 </li>
<li>
调用 <a class="el" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga9bf0ac21078791974fd4f5b8b2c6328b" title="设置Integer型属性值">MV_CC_SetIntValueEx()</a> 配置整型节点。 </li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* strNodeName = <span class="stringliteral">&quot;Width&quot;</span>;</div><div class="line"></div><div class="line"><span class="comment">// 获取整型节点</span></div><div class="line"><a class="code" href="struct_m_v_c_c___i_n_t_v_a_l_u_e___e_x.html">MVCC_INTVALUE_EX</a> stIntValue;</div><div class="line"><span class="keywordtype">int</span> nRet = <a class="code" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga6240aac97e206f77b4ce3bd7a1ef1048">MV_CC_GetIntValueEx</a>(<a class="code" href="_image_save_8cpp.html#a81011b79683fab64ce3aff71114f8fdd">handle</a>, strNodeName ,&amp;stIntValue);</div><div class="line">Check(nRet);</div><div class="line"></div><div class="line"><span class="comment">// 设置整型节点</span></div><div class="line">nRet = <a class="code" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga9bf0ac21078791974fd4f5b8b2c6328b">MV_CC_SetIntValueEx</a>(<a class="code" href="_image_save_8cpp.html#a81011b79683fab64ce3aff71114f8fdd">handle</a>, strNodeName ,stIntValue.<a class="code" href="struct_m_v_c_c___i_n_t_v_a_l_u_e___e_x.html#a75858d445833ad0bbe60edfa610f7f7b">nCurValue</a>);</div><div class="line">Check(nRet);</div></div><!-- fragment --><p> <br />
  </p>
</li>
<li id="enum">
<p class="startli"></p>
<p class="interli"><b>枚举型节点</b>：</p>
<ul>
<li>
调用 <a class="el" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga2daf898feb1afa4bd5de232d85a33780" title="获取Enum属性值">MV_CC_GetEnumValue()</a> 或 <a class="el" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#gab5d124be1a007423035d2b43bce25444" title="获取Enum属性值(扩展接口)">MV_CC_GetEnumValueEx()</a> 获取枚举型节点。 </li>
<li>
调用 <a class="el" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga15a8abe28a1c5a53e10d115c7def4089" title="设置Enum型属性值">MV_CC_SetEnumValue()</a> 设置枚举型节点。 </li>
<li>
调用 <a class="el" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga9a96422f32a02418c1f2bbd829425699" title="获取Enum型节点指定值的符号">MV_CC_GetEnumEntrySymbolic()</a> 获取枚举型节点指定值的符号。 </li>
<li>
调用 <a class="el" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga920d6f7c5547a7099feb85c6e9e738ab" title="设置Enum型属性值">MV_CC_SetEnumValueByString()</a> 设置枚举型属性值。 </li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* strNodeName = <span class="stringliteral">&quot;PixelFormat&quot;</span>;</div><div class="line"><a class="code" href="struct_m_v_c_c___e_n_u_m_e_n_t_r_y.html">MVCC_ENUMENTRY</a> stEnumEntry;</div><div class="line"><a class="code" href="struct_m_v_c_c___e_n_u_m_v_a_l_u_e.html">MVCC_ENUMVALUE</a>   stEnumValue;</div><div class="line"></div><div class="line"><span class="comment">// 获取枚举型节点</span></div><div class="line">nRet = <a class="code" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga2daf898feb1afa4bd5de232d85a33780">MV_CC_GetEnumValue</a>(<a class="code" href="_image_save_8cpp.html#a81011b79683fab64ce3aff71114f8fdd">handle</a>, strNodeName, &amp;stEnumValue);</div><div class="line">Check(nRet);</div><div class="line"><span class="comment">// 获取枚举型节点的符号</span></div><div class="line">stEnumEntry.<a class="code" href="struct_m_v_c_c___e_n_u_m_e_n_t_r_y.html#a146c4804513ac276ba4d49bcc92979ee">nValue</a> = stEnumValue.<a class="code" href="struct_m_v_c_c___e_n_u_m_v_a_l_u_e.html#a83b19189b7bee89a25ea1f31e96e46e5">nCurValue</a>;</div><div class="line">nRet = <a class="code" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga9a96422f32a02418c1f2bbd829425699">MV_CC_GetEnumEntrySymbolic</a>(<a class="code" href="_image_save_8cpp.html#a81011b79683fab64ce3aff71114f8fdd">handle</a>, strNodeName, &amp;stEnumEntry);</div><div class="line">Check(nRet); </div><div class="line"></div><div class="line"><span class="comment">// 设置枚举型节点</span></div><div class="line">nRet = <a class="code" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga15a8abe28a1c5a53e10d115c7def4089">MV_CC_SetEnumValue</a>(<a class="code" href="_image_save_8cpp.html#a81011b79683fab64ce3aff71114f8fdd">handle</a>, strNodeName ,stEnumValue.<a class="code" href="struct_m_v_c_c___e_n_u_m_v_a_l_u_e.html#a83b19189b7bee89a25ea1f31e96e46e5">nCurValue</a>);</div><div class="line">Check(nRet);</div><div class="line"><span class="comment">// 设置枚举型属性值</span></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* strValue = <span class="stringliteral">&quot;Mono8&quot;</span></div><div class="line">nRet = <a class="code" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga920d6f7c5547a7099feb85c6e9e738ab">MV_CC_SetEnumValueByString</a> (<a class="code" href="_image_save_8cpp.html#a81011b79683fab64ce3aff71114f8fdd">handle</a>, strNodeName, strValue);</div><div class="line">Check(nRet);</div></div><!-- fragment --><p> <br />
  </p>
</li>
<li id="float">
<p class="startli"></p>
<p class="interli"><b>浮点型节点</b>：</p>
<ul>
<li>
调用 <a class="el" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga480e49d645f1638ce17da841ac72632c" title="获取Float属性值">MV_CC_GetFloatValue()</a> 获取浮点型节点。 </li>
<li>
调用 <a class="el" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#gad43ad99b3a3a0ec2e91f6ad1ad4e99ac" title="设置Float型属性值">MV_CC_SetFloatValue()</a> 设置浮点型节点。 </li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* strNodeName = <span class="stringliteral">&quot;ExposureTime&quot;</span>;</div><div class="line"></div><div class="line"><span class="comment">// 获取浮点型节点</span></div><div class="line"><a class="code" href="struct_m_v_c_c___f_l_o_a_t_v_a_l_u_e.html">MVCC_FLOATVALUE</a> FloatValue;</div><div class="line"><span class="keywordtype">int</span> nRet = <a class="code" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga480e49d645f1638ce17da841ac72632c">MV_CC_GetFloatValue</a>(<a class="code" href="_image_save_8cpp.html#a81011b79683fab64ce3aff71114f8fdd">handle</a>, strNodeName , &amp;FloatValue);</div><div class="line">Check(nRet);</div><div class="line"></div><div class="line"><span class="comment">// 设置浮点型节点</span></div><div class="line">nRet = <a class="code" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#gad43ad99b3a3a0ec2e91f6ad1ad4e99ac">MV_CC_SetFloatValue</a>(<a class="code" href="_image_save_8cpp.html#a81011b79683fab64ce3aff71114f8fdd">handle</a>, strNodeName , FloatValue.<a class="code" href="struct_m_v_c_c___f_l_o_a_t_v_a_l_u_e.html#a11e278521f1696dee14451558c04673a">fCurValue</a>);</div><div class="line">Check(nRet);</div></div><!-- fragment --><p> <br />
  </p>
</li>
<li id="bool">
<p class="startli"></p>
<p class="interli"><b>布尔型节点</b>：</p>
<ul>
<li>
调用 <a class="el" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga23ceabb8e0caf522ae7f77ad8c14cd84" title="获取Boolean属性值">MV_CC_GetBoolValue()</a> 获取布尔型节点。 </li>
<li>
调用 <a class="el" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#gad725e29bc56fa0eb57dfefb4d8d6ea69" title="设置Boolean型属性值">MV_CC_SetBoolValue()</a> 设置布尔型节点。 </li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* strNodeName = <span class="stringliteral">&quot;GammaEnable&quot;</span>;</div><div class="line"></div><div class="line"><span class="comment">// 获取布尔型节点</span></div><div class="line"><span class="keywordtype">bool</span> bValue = <span class="keyword">false</span>;</div><div class="line"><span class="keywordtype">int</span> nRet = <a class="code" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga23ceabb8e0caf522ae7f77ad8c14cd84">MV_CC_GetBoolValue</a>(<a class="code" href="_image_save_8cpp.html#a81011b79683fab64ce3aff71114f8fdd">handle</a>, strNodeName , &amp;bValue);</div><div class="line">Check(nRet);</div><div class="line"></div><div class="line"><span class="comment">// 设置布尔型节点</span></div><div class="line">nRet = <a class="code" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#gad725e29bc56fa0eb57dfefb4d8d6ea69">MV_CC_SetBoolValue</a>(<a class="code" href="_image_save_8cpp.html#a81011b79683fab64ce3aff71114f8fdd">handle</a>, strNodeName , bValue);</div><div class="line">Check(nRet);</div></div><!-- fragment --><p> <br />
  </p>
</li>
<li id="string">
<p class="startli"></p>
<p class="interli"><b>字符串型节点</b>：</p>
<ul>
<li>
调用 <a class="el" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga590e5271c688137ea03ab316f2ca2307" title="获取String属性值">MV_CC_GetStringValue()</a> 获取字符串型节点。 </li>
<li>
调用 <a class="el" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga3c816d281b3941584a8fa8ebf14feda1" title="设置String型属性值">MV_CC_SetStringValue()</a> 设置字符串型节点。 </li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* strNodeName = <span class="stringliteral">&quot;DeviceUserID&quot;</span>;</div><div class="line"></div><div class="line"><span class="comment">// 获取字符串型节点</span></div><div class="line"><a class="code" href="struct_m_v_c_c___s_t_r_i_n_g_v_a_l_u_e.html">MVCC_STRINGVALUE</a> StringValue;</div><div class="line"><span class="keywordtype">int</span> nRet = <a class="code" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga590e5271c688137ea03ab316f2ca2307">MV_CC_GetStringValue</a>(<a class="code" href="_image_save_8cpp.html#a81011b79683fab64ce3aff71114f8fdd">handle</a>, strNodeName , &amp;StringValue);</div><div class="line">Check(nRet);</div><div class="line"></div><div class="line"><span class="comment">// 设置字符串型节点</span></div><div class="line">nRet = <a class="code" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga3c816d281b3941584a8fa8ebf14feda1">MV_CC_SetStringValue</a>(<a class="code" href="_image_save_8cpp.html#a81011b79683fab64ce3aff71114f8fdd">handle</a>, strNodeName , StringValue.<a class="code" href="struct_m_v_c_c___s_t_r_i_n_g_v_a_l_u_e.html#af0fd08750070e7f2dbba7e89cf4718e4">chCurValue</a>);</div><div class="line">Check(nRet);</div></div><!-- fragment --><p> <br />
  </p>
</li>
<li id="userset">
<p class="startli"></p>
<p class="interli"><b>命令型节点</b>：调用 <a class="el" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga1b85d5a9950f315471f4041db36a5c14" title="设置Command型属性值">MV_CC_SetCommandValue()</a> 设置命令型节点。</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* strNodeName =<span class="stringliteral">&quot;UserSetLoad&quot;</span>;</div><div class="line"></div><div class="line"><span class="comment">// 设置命令型节点</span></div><div class="line">nRet = <a class="code" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga1b85d5a9950f315471f4041db36a5c14">MV_CC_SetCommandValue</a> (<a class="code" href="_image_save_8cpp.html#a81011b79683fab64ce3aff71114f8fdd">handle</a>, strNodeName );</div><div class="line">Check(nRet);</div></div><!-- fragment --><p> <br />
  </p>
</li>
</ul>
</div> </div></div><div id="content"> <div id="GIGE"> <div class="mainparams"> <h2>GigE相机专有配置</h2>
</div></div></div><div id="content"><div id="GIGE"><div class="mainparams"> </div> <div class="subparamswhite"> </div></div></div><div id="content"><div id="GIGE"><div class="subparamswhite">若您使用的相机为GigE相机，您可<a href="#gige_PackageSize">设置最佳包大小</a>和<a href="#SetResendPack">设置重发包</a>。</div></div></div><div id="content"><div id="GIGE"><div class="subparamswhite"> <ul>
<li id="gige_PackageSize">
<p class="startli"></p>
<p class="interli"><b>设置最佳包大小</b></p>
<p class="interli"></p>
<p class="interli">在打开GigE相机并开始取流前，您可通过 <a class="el" href="group___gig_e_xE7_x9B_xB8_xE6_x9C_xBA.html#ga9df4e6a7acbd6e6a6952e01949efc18b" title="获取最佳的packet size，该接口目前只支持GigE相机">MV_CC_GetOptimalPacketSize()</a> 探测当前网络，获取当前网络最佳通信的数据包大小。</p>
<p class="interli"></p>
<p class="interli">您可以使用该数据包大小配置相机发送流数据时的数据包大小，从而充分利用带宽并提高流数据的传输速度。</p>
<div class="fragment"><div class="line"><span class="comment">// 探测网络最佳包大小（仅支持GigE相机）</span></div><div class="line"><span class="keywordflow">if</span> (stDeviceList.<a class="code" href="struct_m_v___c_c___d_e_v_i_c_e___i_n_f_o___l_i_s_t.html#ac8a3f91cd4d9e7f09ff4abaac031dffc">pDeviceInfo</a>[nIndex]-&gt;<a class="code" href="struct_m_v___c_c___d_e_v_i_c_e___i_n_f_o.html#a3b26b1c9681dba57af81bdb7ed795575">nTLayerType</a> == <a class="code" href="group___xE5_xAE_x8F_xE5_xAE_x9A_xE4_xB9_x89.html#gae1780ad0d41bcd2e835ab81155b398e6">MV_GIGE_DEVICE</a>)</div><div class="line">{</div><div class="line">    <span class="keywordtype">int</span> nPacketSize = <a class="code" href="group___gig_e_xE7_x9B_xB8_xE6_x9C_xBA.html#ga9df4e6a7acbd6e6a6952e01949efc18b">MV_CC_GetOptimalPacketSize</a>(<a class="code" href="_image_save_8cpp.html#a81011b79683fab64ce3aff71114f8fdd">handle</a>);</div><div class="line">    <span class="keywordflow">if</span> (nPacketSize &gt; 0)</div><div class="line">    {</div><div class="line">        <span class="comment">// 配置相机的包大小</span></div><div class="line">        nRet = <a class="code" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga9bf0ac21078791974fd4f5b8b2c6328b">MV_CC_SetIntValueEx</a>(<a class="code" href="_image_save_8cpp.html#a81011b79683fab64ce3aff71114f8fdd">handle</a>,<span class="stringliteral">&quot;GevSCPSPacketSize&quot;</span>,nPacketSize);</div><div class="line">        Check(nRet);</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment -->  </li>
<li id="SetResendPack">
<p class="startli"></p>
<p class="interli"><b>设置重发包</b></p>
<p class="interli"></p>
<p class="interli">GigE设备通过网络进行数据通信，在网络拥塞等异常情况下，可能造成SDK侧收到的数据包不完整。可以通过重发命令控制设备对不完整部分进行重传。</p>
<dl class="section attention"><dt>注意</dt><dd><ul>
<li>
重发包需要相机支持，才可以使用。 </li>
<li>
网络偶尔拥塞时，您可通过重发解决偶尔丢包问题。 </li>
<li>
网络持续拥塞时，建议您首先排查并优化网络。若直接开启重发包，可能会造成网络拥塞加剧，请谨慎使用。 </li>
</ul>
</dd></dl>
<ul>
<li>
<p class="startli"></p>
<p class="interli">您可参考如下示例，在应用程序中调用 <a class="el" href="group___gig_e_xE7_x9B_xB8_xE6_x9C_xBA.html#ga873f0f4cc77d6af62f2827c25881e342" title="设置是否打开重发包支持，及重发包设置">MV_GIGE_SetResend()</a> 开启重发包功能。</p>
<div class="fragment"><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bEnable = <span class="keyword">true</span>;            <span class="comment">// 1. 是否开启重发包</span></div><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nMaxResendPercent = 10;    <span class="comment">// 2. 最大重发比</span></div><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nResendTimeout = 50;       <span class="comment">// 3. 重发超时时间，单位ms</span></div><div class="line"></div><div class="line">nRet = <a class="code" href="group___gig_e_xE7_x9B_xB8_xE6_x9C_xBA.html#ga873f0f4cc77d6af62f2827c25881e342">MV_GIGE_SetResend</a>(<a class="code" href="_image_save_8cpp.html#a81011b79683fab64ce3aff71114f8fdd">handle</a>, bEnable, nMaxResendPercent, nResendTimeout);</div><div class="line">Check(nRet);</div></div><!-- fragment --> <ol>
<li>
<b>bEnable</b>，代表是否开启重发包功能。 </li>
<li>
<b>nMaxResendPercent</b>，设置重发当前帧丢包数据的比例，超过部分不重发，以避免加剧网络拥塞。当该值设置为100时，SDK重发当前帧的所有丢包。 </li>
<li>
<b>nResendTimeout</b>，设置重发包超时时间。在当前帧结束后开始计时，若计时时间超出该值，则SDK不再请求重发该丢包数据。 </li>
</ol>
</li>
<li>
<p class="startli"></p>
<p class="interli">在发送重发命令后，若SDK未收到设备响应和重发的数据，您需要控制SDK继续发送重发请求。</p>
<p class="interli"></p>
<p class="interli">您可参考如下示例，调用 <a class="el" href="group___gig_e_xE7_x9B_xB8_xE6_x9C_xBA.html#ga63ecd65b9648f3723547584ad19096ea" title="设置同一重传包多次请求之间的时间间隔">MV_GIGE_SetResendTimeInterval()</a> 控制单个重发包的间隔和 <a class="el" href="group___gig_e_xE7_x9B_xB8_xE6_x9C_xBA.html#gafc670e406bced45f4949acb6dfcfac05" title="设置重传命令最大尝试次数">MV_GIGE_SetResendMaxRetryTimes()</a> 设置最大重发次数。</p>
<div class="fragment"><div class="line"><span class="comment">// 配置重发包间隔</span></div><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nMillisec = 10;</div><div class="line">nRet = <a class="code" href="group___gig_e_xE7_x9B_xB8_xE6_x9C_xBA.html#ga63ecd65b9648f3723547584ad19096ea">MV_GIGE_SetResendTimeInterval</a>(<a class="code" href="_image_save_8cpp.html#a81011b79683fab64ce3aff71114f8fdd">handle</a>, nMillisec); </div><div class="line">Check(nRet);</div><div class="line"></div><div class="line"><span class="comment">// 配置重发包最大重发的次数</span></div><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nRetryTimes = 20;</div><div class="line">nRet  = <a class="code" href="group___gig_e_xE7_x9B_xB8_xE6_x9C_xBA.html#gafc670e406bced45f4949acb6dfcfac05">MV_GIGE_SetResendMaxRetryTimes</a>(<a class="code" href="_image_save_8cpp.html#a81011b79683fab64ce3aff71114f8fdd">handle</a>, nRetryTimes);</div><div class="line">Check(nRet);</div></div><!-- fragment --> <ul>
<li>
<b>nMillisec</b>，重发包间隔默认10ms，代表两次重传命令请求的时间间隔。时间间隔越小，占用的网络资源越多，网络和设备压力越大。 </li>
<li>
<b>nRetryTimes</b>，默认值20，表示对于单个丢包数据，SDK最多请求20次重传命令。 </li>
</ul>
</li>
</ul>
</li>
</ul>
</div><p> <br />
 </div></div><div id="content"> <div id="U3V"> <div class="mainparams"> <h2>U3V相机专有配置</h2>
</div></div></div><div id="content"><div id="U3V"><div class="mainparams"> </div> <div class="subparamswhite"> </div></div></div><div id="content"><div id="U3V"><div class="subparamswhite">若您使用的相机为U3V相机，您可调节其<a href="#Control">控制链路</a>和<a href="#Stream">流链路</a>，以兼容和解决对应的异常。</div></div></div><div id="content"><div id="U3V"><div class="subparamswhite"> <ul>
<li id="Control">
<p class="startli"></p>
<p class="interli">控制链路用于传入控制命令。若控制链路异常，可能导致传输控制命令慢，导致接口超时返回异常。</p>
<p class="interli"></p>
<p class="interli">此时，您可参照如下代码示例，在您的程序中调用 <a class="el" href="group___u3_v_xE7_x9B_xB8_xE6_x9C_xBA.html#ga1e182cad3106424568fb2c0d9ad10a9d" title="设置U3V相机同步读写超时时间，范围：1000-UINT_MAX，（包含1000，不包含UNIT_MAX），默认1000 ms">MV_USB_SetSyncTimeOut()</a> 调节控制链路的超时时间，从而兼容对此类异常进行兼容。</p>
<div class="fragment"><div class="line"><span class="comment">// 默认超时时间1000ms</span></div><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nMills = 1000;</div><div class="line"></div><div class="line"><span class="comment">// 设置U3V相机同步读写超时时间</span></div><div class="line">nRet = <a class="code" href="group___u3_v_xE7_x9B_xB8_xE6_x9C_xBA.html#ga1e182cad3106424568fb2c0d9ad10a9d">MV_USB_SetSyncTimeOut</a>(<a class="code" href="_image_save_8cpp.html#a81011b79683fab64ce3aff71114f8fdd">handle</a>,nMils);</div><div class="line">Check(nRet);</div></div><!-- fragment -->  </li>
<li id="Stream">
<p class="startli"></p>
<p class="interli">流链路用于传入流数据。若流链路带宽不足或系统资源不足，可能导致传输失败、资源创建失败。</p>
<p class="interli"></p>
<p class="interli">您可参照如下代码示例，在您的程序中调用 <a class="el" href="group___u3_v_xE7_x9B_xB8_xE6_x9C_xBA.html#gaf9880ddfc9b0a2c4a06b058993599f51" title="设置U3V的传输包大小">MV_USB_SetTransferSize()</a> 调节流数据包的大小，或调用 <a class="el" href="group___u3_v_xE7_x9B_xB8_xE6_x9C_xBA.html#gadb674609cf080d6de1c45ce08d6ee808" title="设置U3V的传输通道个数">MV_USB_SetTransferWays()</a> 调节U3V流通道个数，减少资源占用。</p>
<div class="fragment"><div class="line"><span class="comment">// 配置U3V相机流数据的最大数据包大小</span></div><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nTransferSize = 1*1024*1024;   <span class="comment">// 默认1MB</span></div><div class="line">nRet = <a class="code" href="group___u3_v_xE7_x9B_xB8_xE6_x9C_xBA.html#gaf9880ddfc9b0a2c4a06b058993599f51">MV_USB_SetTransferSize</a>(<a class="code" href="_image_save_8cpp.html#a81011b79683fab64ce3aff71114f8fdd">handle</a>,nTransferSize);</div><div class="line">Check(nRet);</div><div class="line"></div><div class="line"><span class="comment">// 配置SDK内部U3V的流通道缓存个数</span></div><div class="line">Unsigned <span class="keywordtype">int</span> nTransferWay = 2; </div><div class="line">nRet = <a class="code" href="group___u3_v_xE7_x9B_xB8_xE6_x9C_xBA.html#gadb674609cf080d6de1c45ce08d6ee808">MV_USB_SetTransferWays</a>(<a class="code" href="_image_save_8cpp.html#a81011b79683fab64ce3aff71114f8fdd">handle</a>,nTransferWay);</div><div class="line">Check(nRet);</div></div><!-- fragment -->  </li>
</ul>
</div><p> <br />
 </div></div><div id="content"> <div id="SERIAL"> <div class="mainparams"> <h2>串口设备专有配置</h2>
</div></div></div><div id="content"><div id="SERIAL"><div class="mainparams"> </div></div></div><div id="content"><div id="SERIAL"> <div class="subparamswhite"> </div></div></div><div id="content"><div id="SERIAL"><div class="subparamswhite">串口设备通过串口连接，并且通信协议符合GenCP协议。对于此类设备，您可通过 <a class="el" href="group___xE5_xAE_x8F_xE5_xAE_x9A_xE4_xB9_x89.html#ga45ee1f85623d2a6d3473f62f5cf90a77" title="CameraLink设备（串口）">MV_CAMERALINK_DEVICE()</a> 类型枚举。</div></div></div><div id="content"><div id="SERIAL"><div class="subparamswhite"> <dl class="section note"><dt>注解</dt><dd>当前，串口设备包括：光源控制器和Camera Link相机。</dd></dl>
</div></div></div><div id="content"><div id="SERIAL"><div class="subparamswhite">当设备通过串口通信时，您可以改变波特率，从而优化传输速度。具体步骤如下：</div></div></div><div id="content"><div id="SERIAL"><div class="subparamswhite"> <ol>
<li>
调用 <a class="el" href="group___xE4_xB8_xB2_xE5_x8F_xA3_xE8_xAE_xBE_xE5_xA4_x87.html#ga08f667540f465a8c14ff1256321abf7f" title="获取设备与主机间连接支持的波特率">MV_CAML_GetSupportBaudrates()</a> 获取当前设备和主机之间支持的波特率。 </li>
<li>
调用 <a class="el" href="group___xE4_xB8_xB2_xE5_x8F_xA3_xE8_xAE_xBE_xE5_xA4_x87.html#gabb43686cd20cbeecbe2e66593e7d85f2" title="设置设备波特率">MV_CAML_SetDeviceBaudrate()</a> 设置设备的波特率。 </li>
</ol>
<div class="fragment"><div class="line"><span class="comment">// 获取主机和当前设备支持的波特率</span></div><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nBaudrateAblity = 0;</div><div class="line">nRet = <a class="code" href="group___xE4_xB8_xB2_xE5_x8F_xA3_xE8_xAE_xBE_xE5_xA4_x87.html#ga08f667540f465a8c14ff1256321abf7f">MV_CAML_GetSupportBaudrates</a>(<a class="code" href="_image_save_8cpp.html#a81011b79683fab64ce3aff71114f8fdd">handle</a>,&amp;nBaudrateAblity);</div><div class="line">Check(nRet);</div><div class="line"></div><div class="line"><span class="comment">// 检测是否支持，并配置115200波特率</span></div><div class="line"><span class="keywordflow">if</span> (nBaudrateAblity &amp; <a class="code" href="group___xE5_xAE_x8F_xE5_xAE_x9A_xE4_xB9_x89.html#ga6da10301ddbe31b228666611d6e76bc2">MV_CAML_BAUDRATE_115200</a>)</div><div class="line">{</div><div class="line">    nRet = <a class="code" href="group___xE4_xB8_xB2_xE5_x8F_xA3_xE8_xAE_xBE_xE5_xA4_x87.html#gabb43686cd20cbeecbe2e66593e7d85f2">MV_CAML_SetDeviceBaudrate</a>(<a class="code" href="_image_save_8cpp.html#a81011b79683fab64ce3aff71114f8fdd">handle</a>,<a class="code" href="group___xE5_xAE_x8F_xE5_xAE_x9A_xE4_xB9_x89.html#ga6da10301ddbe31b228666611d6e76bc2">MV_CAML_BAUDRATE_115200</a>);</div><div class="line">    Check(nRet);</div><div class="line">}</div></div><!-- fragment --> </div> </div></div><div id="content"> <div> <br />
 <br />
 <br />
 <table width="60%">
<tr>
<td>上一篇： <a class="el" href="_xE5_x88_x9D_xE5_xA7_x8B_xE5_x8C_x96_xE9_x87_x87_xE9_x9B_x86_xE5_x8D_xA1.html">初始化采集卡</a> </td><td>下一篇： <a class="el" href="_xE4_xBA_x8B_xE4_xBB_xB6_xE5_x8F_x8A_xE5_xBC_x82_xE5_xB8_xB8.html">事件及异常</a>  </td></tr>
</table>
</div> </div> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<div class="footer" style="text-align: right;">
	<hr/>
	<small></small>
</div>
<script>
	// 当前选中的菜单
	var currentMenuItem = document.querySelector('.tablist > li.current > a')
	if (currentMenuItem) { // 子菜单情况
	  window.parent.postMessage({
		navHref: currentMenuItem.href
	  }, '*')
	} else {
	  window.parent.postMessage({
		url: window.location.href
	  }, '*')
	}
  </script>
</body>
</html>